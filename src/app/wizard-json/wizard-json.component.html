<div *ngIf="loading">Cargando</div>
<div *ngIf="!loading" class="docs-wizard-example-overlay-content">
  <fd-wizard>
    <fd-wizard-navigation>
      <ul
        fd-wizard-progress-bar
        size="md"
        role="list"
        aria-label="Wizard Steps"
      >
        <li
          *ngFor="let step of steps; let i = index"
          fd-wizard-step
          [status]="step.status"
          (statusChange)="step.status = $event"
          [label]="step.label"
          [ariaLabel]="step.label"
          (keydown)="handleFocus($event, i)"
        >
          <fd-wizard-step-indicator
            [glyph]="step.glyph"
          ></fd-wizard-step-indicator>
          <fd-wizard-content>
            <h3 fd-title>{{ i + 1 }}. {{ step.label }}</h3>
            <form
              [formGroup]="generalForm"
              *ngIf="step.label === 'Datos generales'"
            >
              <fd-layout-grid>
                <div fdLayoutGridRow>
                  <div
                    *ngIf="generalForm.value.CustomizationID !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >CustomizationID:</label
                      >
                      <fd-select
                        fd-form-select
                        formControlName="CustomizationID"
                        class="select-form"
                        placeholder="Seleccione una opción"
                      >
                        <fd-option
                          *ngFor="let option of listCustomizationID"
                          [value]="option.key"
                          >{{ option.key }} - {{ option.value }}</fd-option
                        >
                      </fd-select>
                    </div>
                  </div>

                  <div
                    *ngIf="generalForm.value.ProfileExecutionID !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >ProfileExecutionID:</label
                      >
                      <fd-select
                        fd-form-select
                        formControlName="ProfileExecutionID"
                        class="select-form"
                        placeholder="Seleccione una opción"
                      >
                        <fd-option
                          *ngFor="let option of listProfileExecutionID"
                          [value]="option.key"
                          >{{ option.key }} - {{ option.value }}</fd-option
                        >
                      </fd-select>
                    </div>
                  </div>

                  <div
                    *ngIf="generalForm.value.ID !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >ID:</label
                      >
                      <input
                        fd-form-control
                        type="text"
                        class="form-control"
                        formControlName="ID"
                      />
                    </div>
                  </div>

                  <div
                    *ngIf="generalForm.value.IssueDate !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >IssueDate:</label
                      >
                      <input
                        fd-form-control
                        type="date"
                        class="form-control"
                        formControlName="IssueDate"
                      />
                    </div>
                  </div>

                  <div
                    *ngIf="generalForm.value.IssueTime !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >IssueTime:</label
                      >
                      <input
                        fd-form-control
                        type="text"
                        class="form-control"
                        formControlName="IssueTime"
                      />
                    </div>
                  </div>

                  <div
                    *ngIf="generalForm.value.InvoiceTypeCode !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >InvoiceTypeCode:</label
                      >
                      <fd-select
                        fd-form-select
                        formControlName="InvoiceTypeCode"
                        class="select-form"
                        placeholder="Seleccione una opción"
                      >
                        <fd-option
                          *ngFor="let option of listInvoiceTypeCode"
                          [value]="option.key"
                          >{{ option.key }} - {{ option.value }}</fd-option
                        >
                      </fd-select>
                    </div>
                  </div>
                  <div
                    *ngIf="generalForm.value.DocumentCurrencyCode !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >DocumentCurrencyCode:</label
                      >
                      <input
                        fd-form-control
                        type="text"
                        class="form-control"
                        formControlName="DocumentCurrencyCode"
                      />
                    </div>
                  </div>
                  <div
                    *ngIf="generalForm.value.LineCountNumeric !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >LineCountNumeric:</label
                      >
                      <input
                        fd-form-control
                        type="text"
                        class="form-control"
                        formControlName="LineCountNumeric"
                      />
                    </div>
                  </div>
                  <div
                    *ngIf="generalForm.value.Dependency !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >Dependency:</label
                      >
                      <input
                        fd-form-control
                        type="text"
                        class="form-control"
                        formControlName="Dependency"
                      />
                    </div>
                  </div>
                  <div
                    *ngIf="generalForm.value.ResolutionNumber !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >ResolutionNumber:</label
                      >
                      <input
                        fd-form-control
                        type="text"
                        class="form-control"
                        formControlName="ResolutionNumber"
                      />
                    </div>
                  </div>
                  <div
                    *ngIf="generalForm.value.StartDate !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >StartDate:</label
                      >
                      <input
                        fd-form-control
                        type="date"
                        class="form-control"
                        formControlName="StartDate"
                      />
                    </div>
                  </div>
                  <div
                    *ngIf="generalForm.value.EndDate !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >EndDate:</label
                      >
                      <input
                        fd-form-control
                        type="date"
                        class="form-control"
                        formControlName="EndDate"
                      />
                    </div>
                  </div>
                  <div
                    *ngIf="generalForm.value.Prefix !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >Prefix:</label
                      >
                      <input
                        fd-form-control
                        type="text"
                        class="form-control"
                        formControlName="Prefix"
                      />
                    </div>
                  </div>
                  <div
                    *ngIf="generalForm.value.StartConsecutive !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >StartConsecutive:</label
                      >
                      <input
                        fd-form-control
                        type="text"
                        class="form-control"
                        formControlName="StartConsecutive"
                      />
                    </div>
                  </div>
                  <div
                    *ngIf="generalForm.value.EndConsecutive !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >EndConsecutive:</label
                      >
                      <input
                        fd-form-control
                        type="text"
                        class="form-control"
                        formControlName="EndConsecutive"
                      />
                    </div>
                  </div>
                </div>
              </fd-layout-grid>
            </form>
            <form
              [formGroup]="orderForm"
              *ngIf="step.label === 'Orden de compra'"
            >
              <fd-layout-grid *ngIf="infoJSON.Invoice['cac:OrderReference']">
                <div
                  *ngFor="
                    let item of infoJSON.Invoice['cac:OrderReference']
                      | keyvalue
                  "
                  fdLayoutGridRow
                >
                  <div
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label
                        fd-form-label
                        for="input-message"
                        id="label-input"
                        >{{ item.key }}</label
                      >

                      <input
                        *ngIf="item.key === 'cbc:IssueDate'"
                        fd-form-control
                        type="date"
                        class="form-control"
                        formControlName="{{ item.key }}"
                      />
                      <input
                        *ngIf="item.key !== 'cbc:IssueDate'"
                        fd-form-control
                        type="text"
                        class="form-control"
                        formControlName="{{ item.key }}"
                      />
                    </div>
                  </div>
                </div>
              </fd-layout-grid>
            </form>

            <!-- Contingencia -->

            <form
              [formGroup]="contingencyForm"
              *ngIf="step.label === 'Contingencia'"
            >
              <fd-layout-grid
                *ngIf="infoJSON.Invoice['cac:AdditionalDocumentReference']"
              >
                <div
                  *ngFor="
                    let item of infoJSON.Invoice[
                      'cac:AdditionalDocumentReference'
                    ] | keyvalue
                  "
                  fdLayoutGridRow
                >
                  <div
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label
                        fd-form-label
                        for="input-message"
                        id="label-input"
                        >{{ item.key }}</label
                      >
                      <input
                        *ngIf="item.key === 'cbc:IssueDate'"
                        fd-form-control
                        type="date"
                        class="form-control"
                        formControlName="{{ item.key }}"
                      />
                      <input
                        *ngIf="item.key !== 'cbc:IssueDate'"
                        fd-form-control
                        type="text"
                        class="form-control"
                        formControlName="{{ item.key }}"
                      />
                    </div>
                  </div>
                </div>
              </fd-layout-grid>
            </form>

            <!-- Emisor -->

            <form
              [formGroup]="transmitterForm"
              *ngIf="step.label === 'Emisor Exito'"
            >
              <fd-panel
                fdCompact
                expandAriaLabel="Panel Expand"
                expandAriaLabelledBy="panel-compact-1"
              >
                <h5 fd-panel-title id="panel-compact-1">
                  Party general information
                </h5>
                <div
                  fd-panel-content
                  ariaLabel="Panel Content"
                  id="panel-content-1"
                >
                  <fd-layout-grid>
                    <div  [fdLayoutGridCol]="2"
                      *ngIf="transmitterForm.value.AdditionalAccountID !== ''"
                    >
                      <div class="form-group col animation-element align">
                        <label
                          fd-form-label
                          for="input-message"
                          id="label-input"
                          >AdditionalAccountID:</label
                        >
                        <input
                          fd-form-control
                          type="text"
                          class="form-control"
                          formControlName="cbc:AdditionalAccountID"
                        />
                      </div>
                    </div>

                    <div
                      [fdLayoutGridCol]="8"
                      formGroupName="cac:Party"
                      *ngIf="transmitterForm.value.AdditionalAccountID !== ''"
                    >
                      <div
                        formGroupName="cac:PartyName"
                        class="form-group col animation-element align"
                      >
                        <label
                          fd-form-label
                          for="input-message"
                          id="label-input"
                          >Name:</label
                        >
                        <input
                          fd-form-control
                          type="text"
                          class="form-control"
                          formControlName="cbc:Name"
                        />
                      </div>
                    </div>
                  </fd-layout-grid>

                  <fd-layout-grid>
                    <div 
                      formGroupName="cac:Party"
                      *ngIf="transmitterForm.value.AdditionalAccountID !== ''"
                    >
                      <div formGroupName="cac:Contact" style="display: grid" >
                        <div style="grid-column: 1" >
                          <label
                            fd-form-label
                            for="input-message"
                            id="label-input"
                            >Telephone:</label
                          >
                          <input
                            fd-form-control
                            type="text"
                            class="form-control"
                            formControlName="cbc:Telephone"
                          /> 
                        </div>

                        <div [fdLayoutGridCol]="8" style="grid-column: 2">
                          <label
                            fd-form-label
                            for="input-message"
                            id="label-input"
                            >Email:</label
                          >
                          <input
                            fd-form-control
                            type="text"
                            class="form-control"
                            formControlName="cbc:ElectronicMail"
                          />
                        </div>
                      </div>
                    </div>
                  </fd-layout-grid>

                </div>
              </fd-panel>

              <fd-panel
                fdCompact
                expandAriaLabel="Panel Expand"
                expandAriaLabelledBy="panel-compact-2"
              >
                <h5 fd-panel-title id="panel-compact-2">PhysicalLocation</h5>
                <div
                  fd-panel-content
                  ariaLabel="Panel Content"
                  id="panel-content-2"
                >
                  <fd-layout-grid>
                    <div fdLayoutGridRow>
                      <div
                        *ngIf="transmitterForm.value.AdditionalAccountID !== ''"
                        [fdLayoutGridCol]="12"
                        [colMd]="6"
                        [colLg]="4"
                        [colXl]="3"
                      >
                        <div class="form-group col animation-element align">
                          <label
                            fd-form-label
                            for="input-message"
                            id="label-input"
                            >AdditionalAccountID:</label
                          >
                          <input
                            fd-form-control
                            type="text"
                            class="form-control"
                            formControlName="cbc:AdditionalAccountID"
                          />
                        </div>
                      </div>

                      <div
                        formGroupName="cac:Party"
                        *ngIf="transmitterForm.value.AdditionalAccountID !== ''"
                        [fdLayoutGridCol]="12"
                        [colMd]="6"
                        [colLg]="4"
                        [colXl]="3"
                      >
                        <div
                          formGroupName="cac:PhysicalLocation"
                          class="form-group col animation-element align"
                        >
                          <div formGroupName="cac:Address">
                            <div
                              *ngIf="
                                infoJSON.Invoice['cac:AccountingSupplierParty']
                              "
                            >
                              <div
                                *ngFor="
                                  let item of infoJSON.Invoice[
                                    'cac:AccountingSupplierParty'
                                  ]['cac:Party']['cac:PhysicalLocation'][
                                    'cac:Address'
                                  ] | keyvalue
                                "
                              >
                                <div
                                  *ngIf="
                                    item.key === 'cbc:ID' ||
                                    item.key === 'cbc:CityName' ||
                                    item.key === 'cbc:PostalZone' ||
                                    item.key === 'cbc:CountrySubentity' ||
                                    item.key === 'cbc:CountrySubentityCode'
                                  "
                                >
                                  <label
                                    fd-form-label
                                    for="input-message"
                                    id="label-input"
                                    >{{ item.key }}</label
                                  >
                                  <input
                                    fd-form-control
                                    type="text"
                                    class="form-control"
                                    formControlName="{{ item.key }}"
                                  />
                                </div>
                              </div>
                            </div>
                            <div formGroupName="cac:AddressLine">
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >CountrySubentityCode:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:Line"
                              />
                            </div>
                            <div formGroupName="cac:Country">
                              <div>
                                <label
                                  fd-form-label
                                  for="input-message"
                                  id="label-input"
                                  >IdentificationCode:</label
                                >
                                <input
                                  fd-form-control
                                  type="text"
                                  class="form-control"
                                  formControlName="cbc:IdentificationCode"
                                />
                              </div>
                              <div formGroupName="cbc:Name">
                                <div>
                                  <label
                                    fd-form-label
                                    for="input-message"
                                    id="label-input"
                                    >languageID:</label
                                  >
                                  <input
                                    fd-form-control
                                    type="text"
                                    class="form-control"
                                    formControlName="languageID"
                                  />
                                </div>
                                <div>
                                  <label
                                    fd-form-label
                                    for="input-message"
                                    id="label-input"
                                    >Country:</label
                                  >
                                  <input
                                    fd-form-control
                                    type="text"
                                    class="form-control"
                                    formControlName="cbc:Name"
                                  />
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </fd-layout-grid>
                </div>
              </fd-panel>

              <fd-panel
                fdCompact
                expandAriaLabel="Panel Expand"
                expandAriaLabelledBy="panel-compact-3"
              >
                <h5 fd-panel-title id="panel-compact-3">PartyTaxScheme</h5>
                <div
                  fd-panel-content
                  ariaLabel="Panel Content"
                  id="panel-content-3"
                >
                  <fd-layout-grid>
                    <div fdLayoutGridRow>
                      <div
                        formGroupName="cac:Party"
                        [fdLayoutGridCol]="12"
                        [colMd]="6"
                        [colLg]="4"
                        [colXl]="3"
                      >
                        <div
                          formGroupName="cac:PartyTaxScheme"
                          class="form-group col animation-element align"
                        >
                          <label
                            fd-form-label
                            for="input-message"
                            id="label-input"
                            >RegistrationName:</label
                          >
                          <input
                            fd-form-control
                            type="text"
                            class="form-control"
                            formControlName="cbc:RegistrationName"
                          />

                          <div formGroupName="cbc:CompanyID">
                            <div
                              *ngIf="
                                infoJSON.Invoice['cac:AccountingSupplierParty']
                              "
                            >
                              <div
                                *ngFor="
                                  let item of infoJSON.Invoice[
                                    'cac:AccountingSupplierParty'
                                  ]['cac:Party']['cac:PartyTaxScheme'][
                                    'cbc:CompanyID'
                                  ] | keyvalue
                                "
                              >
                                <div>
                                  <label
                                    fd-form-label
                                    for="input-message"
                                    id="label-input"
                                    >{{ item.key }}:
                                  </label>
                                  <input
                                    fd-form-control
                                    type="text"
                                    class="form-control"
                                    formControlName="{{ item.key }}"
                                  />
                                </div>
                              </div>
                            </div>
                          </div>
                          <div formGroupName="cbc:TaxLevelCode">
                            <div
                              *ngIf="
                                infoJSON.Invoice['cac:AccountingSupplierParty']
                              "
                            >
                              <div
                                *ngFor="
                                  let item of infoJSON.Invoice[
                                    'cac:AccountingSupplierParty'
                                  ]['cac:Party']['cac:PartyTaxScheme'][
                                    'cbc:TaxLevelCode'
                                  ] | keyvalue
                                "
                              >
                                <div>
                                  <label
                                    fd-form-label
                                    for="input-message"
                                    id="label-input"
                                    >{{ item.key }}:</label
                                  >
                                  <input
                                    fd-form-control
                                    type="text"
                                    class="form-control"
                                    formControlName="{{ item.key }}"
                                  />
                                </div>
                              </div>
                            </div>
                          </div>
                          <div formGroupName="cac:RegistrationAddress">
                            <div
                              *ngIf="
                                infoJSON.Invoice['cac:AccountingSupplierParty']
                              "
                            >
                              <div
                                *ngFor="
                                  let item of infoJSON.Invoice[
                                    'cac:AccountingSupplierParty'
                                  ]['cac:Party']['cac:PartyTaxScheme'][
                                    'cac:RegistrationAddress'
                                  ] | keyvalue
                                "
                              >
                                <div
                                  *ngIf="
                                    item.key === 'cbc:ID' ||
                                    item.key === 'cbc:CityName' ||
                                    item.key === 'cbc:PostalZone' ||
                                    item.key === 'cbc:CountrySubentity' ||
                                    item.key === 'cbc:CountrySubentityCode'
                                  "
                                >
                                  <label
                                    fd-form-label
                                    for="input-message"
                                    id="label-input"
                                    >{{ item.key }}:</label
                                  >
                                  <input
                                    fd-form-control
                                    type="text"
                                    class="form-control"
                                    formControlName="{{ item.key }}"
                                  />
                                </div>
                              </div>
                            </div>
                            <div formGroupName="cac:AddressLine">
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >Line:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:Line"
                              />
                            </div>
                            <div formGroupName="cac:Country">
                              <div>
                                <label
                                  fd-form-label
                                  for="input-message"
                                  id="label-input"
                                  >IdentificationCode:</label
                                >
                                <input
                                  fd-form-control
                                  type="text"
                                  class="form-control"
                                  formControlName="cbc:IdentificationCode"
                                />
                              </div>
                              <div formGroupName="cbc:Name">
                                <div>
                                  <label
                                    fd-form-label
                                    for="input-message"
                                    id="label-input"
                                    >Name:</label
                                  >
                                  <input
                                    fd-form-control
                                    type="text"
                                    class="form-control"
                                    formControlName="cbc:Name"
                                  />
                                </div>
                                <div>
                                  <label
                                    fd-form-label
                                    for="input-message"
                                    id="label-input"
                                    >languageID:</label
                                  >
                                  <input
                                    fd-form-control
                                    type="text"
                                    class="form-control"
                                    formControlName="languageID"
                                  />
                                </div>
                              </div>
                            </div>
                          </div>
                          <div formGroupName="cac:TaxScheme">
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >ID:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:ID"
                              />
                            </div>
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >Name:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:Name"
                              />
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </fd-layout-grid>
                </div>
              </fd-panel>

              <fd-panel
                fdCompact
                expandAriaLabel="Panel Expand"
                expandAriaLabelledBy="panel-compact-4"
              >
                <h5 fd-panel-title id="panel-compact-4">PartyLegalEntity</h5>
                <div
                  fd-panel-content
                  ariaLabel="Panel Content"
                  id="panel-content-4"
                >
                  <fd-layout-grid>
                    <div fdLayoutGridRow>
                      <div
                        formGroupName="cac:Party"
                        [fdLayoutGridCol]="12"
                        [colMd]="6"
                        [colLg]="4"
                        [colXl]="3"
                      >
                        <div
                          formGroupName="cac:PartyLegalEntity"
                          class="form-group col animation-element align"
                        >
                          <label
                            fd-form-label
                            for="input-message"
                            id="label-input"
                            >RegistrationName:</label
                          >
                          <input
                            fd-form-control
                            type="text"
                            class="form-control"
                            formControlName="cbc:RegistrationName"
                          />

                          <div formGroupName="cbc:CompanyID">
                            <div
                              *ngIf="
                                infoJSON.Invoice['cac:AccountingSupplierParty']
                              "
                            >
                              <div
                                *ngFor="
                                  let item of infoJSON.Invoice[
                                    'cac:AccountingSupplierParty'
                                  ]['cac:Party']['cac:PartyLegalEntity'][
                                    'cbc:CompanyID'
                                  ] | keyvalue
                                "
                              >
                                <div>
                                  <label
                                    fd-form-label
                                    for="input-message"
                                    id="label-input"
                                    >{{ item.key }}</label
                                  >
                                  <input
                                    fd-form-control
                                    type="text"
                                    class="form-control"
                                    formControlName="{{ item.key }}"
                                  />
                                </div>
                              </div>
                            </div>
                          </div>
                          <div formGroupName="cac:CorporateRegistrationScheme">
                            <div
                              *ngIf="
                                infoJSON.Invoice['cac:AccountingSupplierParty']
                              "
                            >
                              <div
                                *ngFor="
                                  let item of infoJSON.Invoice[
                                    'cac:AccountingSupplierParty'
                                  ]['cac:Party']['cac:PartyLegalEntity'][
                                    'cac:CorporateRegistrationScheme'
                                  ] | keyvalue
                                "
                              >
                                <div>
                                  <label
                                    fd-form-label
                                    for="input-message"
                                    id="label-input"
                                    >{{ item.key }}</label
                                  >
                                  <input
                                    fd-form-control
                                    type="text"
                                    class="form-control"
                                    formControlName="{{ item.key }}"
                                  />
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </fd-layout-grid>
                </div>
              </fd-panel>
            </form>

            <!-- Receptor -->

            <form [formGroup]="receiverForm" *ngIf="step.label === 'Receptor'">
              <fd-panel
                fdCompact
                expandAriaLabel="Panel Expand"
                expandAriaLabelledBy="panel-compact-1"
              >
                <h5 fd-panel-title id="panel-compact-1">
                  Party general information
                </h5>
                <div
                  fd-panel-content
                  ariaLabel="Panel Content"
                  id="panel-content-1"
                >
                  <fd-layout-grid>
                    <div fdLayoutGridRow>
                      <div
                        *ngIf="transmitterForm.value.AdditionalAccountID !== ''"
                        [fdLayoutGridCol]="12"
                        [colMd]="6"
                        [colLg]="4"
                        [colXl]="3"
                      >
                        <div class="form-group col animation-element align">
                          <label
                            fd-form-label
                            for="input-message"
                            id="label-input"
                            >AdditionalAccountID:</label
                          >
                          <input
                            fd-form-control
                            type="text"
                            class="form-control"
                            formControlName="cbc:AdditionalAccountID"
                          />
                        </div>
                      </div>

                      <div
                        formGroupName="cac:Party"
                        *ngIf="transmitterForm.value.AdditionalAccountID !== ''"
                      >
                        <div formGroupName="cac:PartyName">
                          <label
                            fd-form-label
                            for="input-message"
                            id="label-input"
                            >Name:</label
                          >
                          <input
                            fd-form-control
                            type="text"
                            class="form-control"
                            formControlName="cbc:Name"
                          />
                        </div>

                        <div formGroupName="cac:Contact">
                          <div>
                            <label
                              fd-form-label
                              for="input-message"
                              id="label-input"
                              >Telephone:</label
                            >
                            <input
                              fd-form-control
                              type="text"
                              class="form-control"
                              formControlName="cbc:Telephone"
                            />
                          </div>

                          <div>
                            <label
                              fd-form-label
                              for="input-message"
                              id="label-input"
                              >Email:</label
                            >
                            <input
                              fd-form-control
                              type="text"
                              class="form-control"
                              formControlName="cbc:ElectronicMail"
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                  </fd-layout-grid>
                </div>
              </fd-panel>

              <fd-panel
                fdCompact
                expandAriaLabel="Panel Expand"
                expandAriaLabelledBy="panel-compact-2"
              >
                <h5 fd-panel-title id="panel-compact-2">PhysicalLocation</h5>
                <div
                  fd-panel-content
                  ariaLabel="Panel Content"
                  id="panel-content-2"
                >
                  <fd-layout-grid>
                    <div fdLayoutGridRow>
                      <div
                        *ngIf="transmitterForm.value.AdditionalAccountID !== ''"
                        [fdLayoutGridCol]="12"
                        [colMd]="6"
                        [colLg]="4"
                        [colXl]="3"
                      >
                        <div class="form-group col animation-element align">
                          <label
                            fd-form-label
                            for="input-message"
                            id="label-input"
                            >AdditionalAccountID:</label
                          >
                          <input
                            fd-form-control
                            type="text"
                            class="form-control"
                            formControlName="cbc:AdditionalAccountID"
                          />
                        </div>
                      </div>

                      <div
                        formGroupName="cac:Party"
                        *ngIf="transmitterForm.value.AdditionalAccountID !== ''"
                        [fdLayoutGridCol]="12"
                        [colMd]="6"
                        [colLg]="4"
                        [colXl]="3"
                      >
                        <div
                          formGroupName="cac:PhysicalLocation"
                          class="form-group col animation-element align"
                        >
                          <div formGroupName="cac:Address">
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >ID:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:ID"
                              />
                            </div>
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >CityName:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:CityName"
                              />
                            </div>
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >PostalZone:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:PostalZone"
                              />
                            </div>
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >CountrySubentity:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:CountrySubentity"
                              />
                            </div>
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >CountrySubentityCode:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:CountrySubentityCode"
                              />
                            </div>
                            <div formGroupName="cac:AddressLine">
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >CountrySubentityCode:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:Line"
                              />
                            </div>
                            <div formGroupName="cac:Country">
                              <div>
                                <label
                                  fd-form-label
                                  for="input-message"
                                  id="label-input"
                                  >IdentificationCode:</label
                                >
                                <input
                                  fd-form-control
                                  type="text"
                                  class="form-control"
                                  formControlName="cbc:IdentificationCode"
                                />
                              </div>
                              <div formGroupName="cbc:Name">
                                <div>
                                  <label
                                    fd-form-label
                                    for="input-message"
                                    id="label-input"
                                    >languageID:</label
                                  >
                                  <input
                                    fd-form-control
                                    type="text"
                                    class="form-control"
                                    formControlName="languageID"
                                  />
                                </div>
                                <div>
                                  <label
                                    fd-form-label
                                    for="input-message"
                                    id="label-input"
                                    >Country:</label
                                  >
                                  <input
                                    fd-form-control
                                    type="text"
                                    class="form-control"
                                    formControlName="cbc:Name"
                                  />
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </fd-layout-grid>
                </div>
              </fd-panel>

              <fd-panel
                fdCompact
                expandAriaLabel="Panel Expand"
                expandAriaLabelledBy="panel-compact-3"
              >
                <h5 fd-panel-title id="panel-compact-3">PartyTaxScheme</h5>
                <div
                  fd-panel-content
                  ariaLabel="Panel Content"
                  id="panel-content-3"
                >
                  <fd-layout-grid>
                    <div fdLayoutGridRow>
                      <div
                        formGroupName="cac:Party"
                        [fdLayoutGridCol]="12"
                        [colMd]="6"
                        [colLg]="4"
                        [colXl]="3"
                      >
                        <div
                          formGroupName="cac:PartyTaxScheme"
                          class="form-group col animation-element align"
                        >
                          <label
                            fd-form-label
                            for="input-message"
                            id="label-input"
                            >RegistrationName:</label
                          >
                          <input
                            fd-form-control
                            type="text"
                            class="form-control"
                            formControlName="cbc:RegistrationName"
                          />

                          <div formGroupName="cbc:CompanyID">
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >schemeID:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="schemeID"
                              />
                            </div>
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >schemeName:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="schemeName"
                              />
                            </div>
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >schemeAgencyID:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="schemeAgencyID"
                              />
                            </div>
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >schemeAgencyName:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="schemeAgencyName"
                              />
                            </div>
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >CompanyID:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:CompanyID"
                              />
                            </div>
                          </div>
                          <div formGroupName="cbc:TaxLevelCode">
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >listName:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="listName"
                              />
                            </div>
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >TaxLevelCode:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:TaxLevelCode"
                              />
                            </div>
                          </div>
                          <div formGroupName="cac:RegistrationAddress">
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >cbc:ID:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:ID"
                              />
                            </div>
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >CityName:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:CityName"
                              />
                            </div>
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >PostalZone:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:PostalZone"
                              />
                            </div>
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >CountrySubentity:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:CountrySubentity"
                              />
                            </div>
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >CountrySubentityCode:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:CountrySubentityCode"
                              />
                            </div>
                            <div formGroupName="cac:AddressLine">
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >Line:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:Line"
                              />
                            </div>
                            <div formGroupName="cac:Country">
                              <div>
                                <label
                                  fd-form-label
                                  for="input-message"
                                  id="label-input"
                                  >IdentificationCode:</label
                                >
                                <input
                                  fd-form-control
                                  type="text"
                                  class="form-control"
                                  formControlName="cbc:IdentificationCode"
                                />
                              </div>
                              <div formGroupName="cbc:Name">
                                <div>
                                  <label
                                    fd-form-label
                                    for="input-message"
                                    id="label-input"
                                    >Name:</label
                                  >
                                  <input
                                    fd-form-control
                                    type="text"
                                    class="form-control"
                                    formControlName="cbc:Name"
                                  />
                                </div>
                                <div>
                                  <label
                                    fd-form-label
                                    for="input-message"
                                    id="label-input"
                                    >languageID:</label
                                  >
                                  <input
                                    fd-form-control
                                    type="text"
                                    class="form-control"
                                    formControlName="languageID"
                                  />
                                </div>
                              </div>
                            </div>
                          </div>
                          <div formGroupName="cac:TaxScheme">
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >ID:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:ID"
                              />
                            </div>
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >Name:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:Name"
                              />
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </fd-layout-grid>
                </div>
              </fd-panel>

              <fd-panel
                fdCompact
                expandAriaLabel="Panel Expand"
                expandAriaLabelledBy="panel-compact-4"
              >
                <h5 fd-panel-title id="panel-compact-4">PartyLegalEntity</h5>
                <div
                  fd-panel-content
                  ariaLabel="Panel Content"
                  id="panel-content-4"
                >
                  <fd-layout-grid>
                    <div fdLayoutGridRow>
                      <div
                        formGroupName="cac:Party"
                        [fdLayoutGridCol]="12"
                        [colMd]="6"
                        [colLg]="4"
                        [colXl]="3"
                      >
                        <div
                          formGroupName="cac:PartyLegalEntity"
                          class="form-group col animation-element align"
                        >
                          <label
                            fd-form-label
                            for="input-message"
                            id="label-input"
                            >RegistrationName:</label
                          >
                          <input
                            fd-form-control
                            type="text"
                            class="form-control"
                            formControlName="cbc:RegistrationName"
                          />

                          <div formGroupName="cbc:CompanyID">
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >schemeID:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="schemeID"
                              />
                            </div>
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >schemeName:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="schemeName"
                              />
                            </div>
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >schemeAgencyID:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="schemeAgencyID"
                              />
                            </div>
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >schemeAgencyName:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="schemeAgencyName"
                              />
                            </div>
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >CompanyID:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:CompanyID"
                              />
                            </div>
                          </div>

                          <!-- Ejemplo para mapear los valores que vengan en el objetoooo -->

                          <div formGroupName="cac:CorporateRegistrationScheme">
                            <div
                              *ngIf="
                                infoJSON.Invoice['cac:AccountingCustomerParty']
                              "
                            >
                              <div
                                *ngFor="
                                  let item of infoJSON.Invoice[
                                    'cac:AccountingCustomerParty'
                                  ]['cac:Party']['cac:PartyLegalEntity'][
                                    'cac:CorporateRegistrationScheme'
                                  ] | keyvalue
                                "
                              >
                                <div>
                                  <label
                                    fd-form-label
                                    for="input-message"
                                    id="label-input"
                                    >{{ item.key }}</label
                                  >
                                  <input
                                    fd-form-control
                                    type="text"
                                    class="form-control"
                                    formControlName="{{ item.key }}"
                                  />
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </fd-layout-grid>
                </div>
              </fd-panel>
            </form>

            <!-- Formas de pago -->

            <form
              [formGroup]="$any(paymentMeansForm)"
              *ngIf="step.label === 'Formas de pago'"
            >
              <fd-layout-grid>
                <div
                  *ngFor="
                    let means of this.infoJSON.Invoice['cac:PaymentMeans'];
                    let i = index
                  "
                  fdLayoutGridRow
                  [formGroupName]="i"
                >
                  <div
                    *ngFor="let item of means | keyvalue"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >{{ item.key }}:
                      </label>
                      <input
                        fd-form-control
                        type="text"
                        class="form-control"
                        formControlName="{{ item.key }}"
                      />
                    </div>
                  </div>
                </div>
              </fd-layout-grid>
            </form>
            <!-- Tributos impuestos -->
            <form
              [formGroup]="$any(taxTotalForm)"
              *ngIf="step.label === 'Tributos de impuestos'"
            >
              <fd-layout-grid>
                <div
                  *ngFor="
                    let tax of this.infoJSON.Invoice['cac:TaxTotal'];
                    let i = index
                  "
                  fdLayoutGridRow
                  [formGroupName]="i"
                >
                  <div
                    *ngFor="let mean of tax | keyvalue"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div *ngIf="mean.key === 'cbc:TaxAmount'">
                      <div formGroupName="cbc:TaxAmount">
                        <div *ngIf="infoJSON.Invoice['cac:TaxTotal']">
                          <div
                            *ngFor="
                              let itemAmount of infoJSON.Invoice[
                                'cac:TaxTotal'
                              ][i]['cbc:TaxAmount'] | keyvalue
                            "
                          >
                            <label
                              fd-form-label
                              for="input-message"
                              id="label-input"
                              >{{ itemAmount.key }}</label
                            >
                            <input
                              fd-form-control
                              type="text"
                              class="form-control"
                              formControlName="{{ itemAmount.key }}"
                            />
                          </div>
                        </div>
                      </div>
                    </div>

                    <div *ngIf="mean.key === 'cbc:RoundingAmount'">
                      <div formGroupName="cbc:RoundingAmount">
                        <div *ngIf="infoJSON.Invoice['cac:TaxTotal']">
                          <div
                            *ngFor="
                              let itemRoundingAmount of infoJSON.Invoice[
                                'cac:TaxTotal'
                              ][i]['cbc:RoundingAmount'] | keyvalue
                            "
                          >
                            <label
                              fd-form-label
                              for="input-message"
                              id="label-input"
                              >{{ itemRoundingAmount.key }}</label
                            >
                            <input
                              fd-form-control
                              type="text"
                              class="form-control"
                              formControlName="{{ itemRoundingAmount.key }}"
                            />
                          </div>
                        </div>
                      </div>
                    </div>

                    <div *ngIf="mean.key === 'cac:TaxSubtotal'">
                      {{ mean | json }}
                      <!-- <div formGroupName="cbc:RoundingAmount">
                      </div> -->
                      <fd-panel
                        fdCompact
                        expandAriaLabel="Panel Expand"
                        expandAriaLabelledBy="panel-compact-1"
                      >
                        <h5 fd-panel-title id="panel-compact-1">
                          cbc:TaxableAmount
                        </h5>
                      </fd-panel>
                      <!--  <fd-panel
                      fdCompact
                      expandAriaLabel="Panel Expand"
                      expandAriaLabelledBy="panel-compact-1"
                    >
                      <h5 fd-panel-title id="panel-compact-1">
                        Party general information
                      </h5>
                      <div
                        fd-panel-content
                        ariaLabel="Panel Content"
                        id="panel-content-1"
                      >
                        <fd-layout-grid>
                          <div fdLayoutGridRow>
                            <div
                              *ngIf="transmitterForm.value.AdditionalAccountID !== ''"
                              [fdLayoutGridCol]="12"
                              [colMd]="6"
                              [colLg]="4"
                              [colXl]="3"
                            >
                              <div class="form-group col animation-element align">
                                <label
                                  fd-form-label
                                  for="input-message"
                                  id="label-input"
                                  >AdditionalAccountID:</label
                                >
                                <input
                                  fd-form-control
                                  type="text"
                                  class="form-control"
                                  formControlName="cbc:AdditionalAccountID"
                                />
                              </div>
                            </div>
      
                            <div
                              formGroupName="cac:Party"
                              *ngIf="transmitterForm.value.AdditionalAccountID !== ''"
                              [fdLayoutGridCol]="12"
                              [colMd]="6"
                              [colLg]="4"
                              [colXl]="3"
                            >
                              <div
                                formGroupName="cac:PartyName"
                                class="form-group col animation-element align"
                              >
                                <label
                                  fd-form-label
                                  for="input-message"
                                  id="label-input"
                                  >Name:</label
                                >
                                <input
                                  fd-form-control
                                  type="text"
                                  class="form-control"
                                  formControlName="cbc:Name"
                                />
                              </div>
      
                              <div
                                formGroupName="cac:Contact"
                                class="form-group col animation-element align"
                              >
                                <div>
                                  <label
                                    fd-form-label
                                    for="input-message"
                                    id="label-input"
                                    >Telephone:</label
                                  >
                                  <input
                                    fd-form-control
                                    type="text"
                                    class="form-control"
                                    formControlName="cbc:Telephone"
                                  />
                                </div>
      
                                <div>
                                  <label
                                    fd-form-label
                                    for="input-message"
                                    id="label-input"
                                    >Email:</label
                                  >
                                  <input
                                    fd-form-control
                                    type="text"
                                    class="form-control"
                                    formControlName="cbc:ElectronicMail"
                                  />
                                </div>
                              </div>
                            </div>
                          </div>
                        </fd-layout-grid>
                      </div>
                    </fd-panel> -->
                    </div>

                    <div class="form-group col animation-element align"></div>
                  </div>
                </div>
              </fd-layout-grid>
            </form>
            <div class="row row-cols-1 row-cols-md-2 spacing">
              <button
                fd-button
                fdCompact
                fdType="emphasized"
                type="button"
                (click)="goToStep(i - 1)"
                *ngIf="i !== 0"
              >
                Regresar
              </button>
              <button
                fd-button
                fdCompact
                fdType="emphasized"
                type="submit"
                (click)="goToStep(i + 1)"
                *ngIf="i + 1 < steps.length"
              >
                Próximo paso
              </button>
            </div>
          </fd-wizard-content>
        </li>
      </ul>
    </fd-wizard-navigation>
    <div fd-bar barDesign="footer">
      <div fd-bar-right style="margin-top: 20px">
        <fd-bar-element>
          <button fd-button label="Cancel" fdCompact></button>
        </fd-bar-element>
        <a
          style="text-decoration: none"
          [href]="fileUrl"
          download="file.txt"
          (click)="downloadNewJson()"
          ><button
            fd-button
            fdCompact
            fdType="emphasized"
            type="button"
            label="Guardar cambios"
          ></button
        ></a>
      </div>
    </div>
  </fd-wizard>
</div>
