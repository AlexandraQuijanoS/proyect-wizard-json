<div *ngIf="loading">Cargando</div>
<div *ngIf="!loading" class="docs-wizard-example-overlay-content">
  <fd-wizard>
    <fd-wizard-navigation>
      <ul
        fd-wizard-progress-bar
        size="md"
        role="list"
        aria-label="Wizard Steps"
      >
        <li
          *ngFor="let step of steps; let i = index"
          fd-wizard-step
          [status]="step.status"
          (statusChange)="step.status = $event"
          [label]="step.label"
          [ariaLabel]="step.label"
          (keydown)="handleFocus($event, i)"
        >
          <fd-wizard-step-indicator
            [glyph]="step.glyph"
          ></fd-wizard-step-indicator>
          <fd-wizard-content>
            <h3 fd-title>{{ i + 1 }}. {{ step.label }}</h3>
            <form
              [formGroup]="generalForm"
              *ngIf="step.label === 'Datos generales'"
            >
              <fd-layout-grid>
                <div fdLayoutGridRow>
                  <div
                    *ngIf="generalForm.value.CustomizationID !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >CustomizationID:</label
                      >
                      <fd-select
                        fd-form-select
                        formControlName="CustomizationID"
                        class="select-form"
                        placeholder="Seleccione una opción"
                      >
                        <fd-option
                          *ngFor="let option of listCustomizationID"
                          [value]="option.key"
                          >{{ option.key }} - {{ option.value }}</fd-option
                        >
                      </fd-select>
                    </div>
                  </div>

                  <div
                    *ngIf="generalForm.value.ProfileExecutionID !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >ProfileExecutionID:</label
                      >
                      <fd-select
                        fd-form-select
                        formControlName="ProfileExecutionID"
                        class="select-form"
                        placeholder="Seleccione una opción"
                      >
                        <fd-option
                          *ngFor="let option of listProfileExecutionID"
                          [value]="option.key"
                          >{{ option.key }} - {{ option.value }}</fd-option
                        >
                      </fd-select>
                    </div>
                  </div>

                  <div
                    *ngIf="generalForm.value.ID !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >ID:</label
                      >
                      <input
                        fd-form-control
                        type="text"
                        class="form-control"
                        formControlName="ID"
                      />
                    </div>
                  </div>

                  <div
                    *ngIf="generalForm.value.IssueDate !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >IssueDate:</label
                      >
                      <input
                        fd-form-control
                        type="date"
                        class="form-control"
                        formControlName="IssueDate"
                      />
                    </div>
                  </div>

                  <div
                    *ngIf="generalForm.value.IssueTime !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >IssueTime:</label
                      >
                      <input
                        fd-form-control
                        type="text"
                        class="form-control"
                        formControlName="IssueTime"
                      />
                    </div>
                  </div>

                  <div
                    *ngIf="generalForm.value.InvoiceTypeCode !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >InvoiceTypeCode:</label
                      >
                      <fd-select
                        fd-form-select
                        formControlName="InvoiceTypeCode"
                        class="select-form"
                        placeholder="Seleccione una opción"
                      >
                        <fd-option
                          *ngFor="let option of listInvoiceTypeCode"
                          [value]="option.key"
                          >{{ option.key }} - {{ option.value }}</fd-option
                        >
                      </fd-select>
                    </div>
                  </div>
                  <div
                    *ngIf="generalForm.value.DocumentCurrencyCode !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >DocumentCurrencyCode:</label
                      >
                      <input
                        fd-form-control
                        type="text"
                        class="form-control"
                        formControlName="DocumentCurrencyCode"
                      />
                    </div>
                  </div>
                  <div
                    *ngIf="generalForm.value.LineCountNumeric !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >LineCountNumeric:</label
                      >
                      <input
                        fd-form-control
                        type="text"
                        class="form-control"
                        formControlName="LineCountNumeric"
                      />
                    </div>
                  </div>
                  <div
                    *ngIf="generalForm.value.Dependency !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >Dependency:</label
                      >
                      <input
                        fd-form-control
                        type="text"
                        class="form-control"
                        formControlName="Dependency"
                      />
                    </div>
                  </div>
                  <div
                    *ngIf="generalForm.value.ResolutionNumber !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >ResolutionNumber:</label
                      >
                      <input
                        fd-form-control
                        type="text"
                        class="form-control"
                        formControlName="ResolutionNumber"
                      />
                    </div>
                  </div>
                  <div
                    *ngIf="generalForm.value.StartDate !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >StartDate:</label
                      >
                      <input
                        fd-form-control
                        type="date"
                        class="form-control"
                        formControlName="StartDate"
                      />
                    </div>
                  </div>
                  <div
                    *ngIf="generalForm.value.EndDate !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >EndDate:</label
                      >
                      <input
                        fd-form-control
                        type="date"
                        class="form-control"
                        formControlName="EndDate"
                      />
                    </div>
                  </div>
                  <div
                    *ngIf="generalForm.value.Prefix !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >Prefix:</label
                      >
                      <input
                        fd-form-control
                        type="text"
                        class="form-control"
                        formControlName="Prefix"
                      />
                    </div>
                  </div>
                  <div
                    *ngIf="generalForm.value.StartConsecutive !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >StartConsecutive:</label
                      >
                      <input
                        fd-form-control
                        type="text"
                        class="form-control"
                        formControlName="StartConsecutive"
                      />
                    </div>
                  </div>
                  <div
                    *ngIf="generalForm.value.EndConsecutive !== ''"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >EndConsecutive:</label
                      >
                      <input
                        fd-form-control
                        type="text"
                        class="form-control"
                        formControlName="EndConsecutive"
                      />
                    </div>
                  </div>
                </div>
              </fd-layout-grid>
            </form>

            <!-- Orden de compra -->

            <form
              [formGroup]="orderForm"
              *ngIf="step.label === 'Orden de compra'"
            >
              <fd-layout-grid
                *ngIf="infoJSON.Invoice['cac:OrderReference']"
                style="margin-left: 8px"
              >
                <div class="flex-content">
                  <div
                    *ngFor="
                      let item of infoJSON.Invoice['cac:OrderReference']
                        | keyvalue
                    "
                    fdLayoutGridRow
                    class="ms-1"
                  >
                    <div>
                      <div
                        class="form-group col animation-element align"
                        fd-form-item
                      >
                        <label
                          fd-form-label
                          for="input-message"
                          id="label-input"
                          >{{ changeName(item.key) }}</label
                        >

                        <input
                          [readonly]="enableOrderForm"
                          *ngIf="item.key === 'cbc:IssueDate'"
                          fd-form-control
                          type="date"
                          class="form-control"
                          formControlName="{{ item.key }}"
                        />
                        <input
                          [readonly]="enableOrderForm"
                          *ngIf="item.key !== 'cbc:IssueDate'"
                          fd-form-control
                          type="text"
                          class="form-control"
                          formControlName="{{ item.key }}"
                        />
                      </div>
                    </div>
                  </div>
                </div>
              </fd-layout-grid>
              <button
                *ngIf="!dataJSON.Invoice['cac:OrderReference']"
                fd-button
                fdCompact
                type="button"
                fdType="emphasized"
                (click)="enableSection('enableOrderForm')"
              >
                Habilitar
              </button>
            </form>

            <!-- Contingencia -->

            <form
              [formGroup]="contingencyForm"
              *ngIf="step.label === 'Contingencia'"
            >
              <fd-layout-grid
                *ngIf="infoJSON.Invoice['cac:AdditionalDocumentReference']"
              >
                <div class="flex-content">
                  <div
                    *ngFor="
                      let item of infoJSON.Invoice[
                        'cac:AdditionalDocumentReference'
                      ] | keyvalue
                    "
                    class="ms-1"
                  >
                    <div>
                      <label
                        fd-form-label
                        for="input-message"
                        id="label-input"
                        >{{ changeName(item.key) }}</label
                      >
                      <input
                        [readonly]="enableContingencyForm"
                        *ngIf="item.key === 'cbc:IssueDate'"
                        fd-form-control
                        type="date"
                        class="form-control"
                        formControlName="{{ item.key }}"
                      />
                      <input
                        [readonly]="enableContingencyForm"
                        *ngIf="item.key !== 'cbc:IssueDate'"
                        fd-form-control
                        type="text"
                        class="form-control"
                        formControlName="{{ item.key }}"
                      />
                    </div>
                  </div>
                </div>
              </fd-layout-grid>
              <button
                *ngIf="!dataJSON.Invoice['cac:AdditionalDocumentReference']"
                fd-button
                type="button"
                fdType="emphasized"
                (click)="enableSection('enableContingencyForm')"
              >
                Habilitar
              </button>
            </form>

            <!-- Emisor -->

            <form
              [formGroup]="transmitterForm"
              *ngIf="step.label === 'Emisor Exito'"
            >
              <fd-panel
                fdCompact
                expandAriaLabel="Panel Expand"
                expandAriaLabelledBy="panel-compact-1"
              >
                <h5 fd-panel-title id="panel-compact-1">
                  Party general information
                </h5>
                <div
                  fd-panel-content
                  ariaLabel="Panel Content"
                  id="panel-content-1"
                >
                  <fd-layout-grid>
                    <div
                      *ngIf="transmitterForm.value.AdditionalAccountID !== ''"
                    >
                      <div>
                        <label
                          fd-form-label
                          for="input-message"
                          id="label-input"
                          >AdditionalAccountID:</label
                        >
                        <input
                          fd-form-control
                          type="text"
                          class="form-control"
                          formControlName="cbc:AdditionalAccountID"
                        />
                      </div>
                    </div>

                    <div
                      formGroupName="cac:Party"
                      *ngIf="transmitterForm.value.AdditionalAccountID !== ''"
                    >
                      <div formGroupName="cac:PartyName" class="margin_name">
                        <label
                          fd-form-label
                          for="input-message"
                          id="label-input"
                          >Name:</label
                        >
                        <input
                          fd-form-control
                          type="text"
                          class="form-control"
                          formControlName="cbc:Name"
                        />
                      </div>
                    </div>

                    <div
                      formGroupName="cac:Party"
                      *ngIf="transmitterForm.value.AdditionalAccountID !== ''"
                    >
                      <div formGroupName="cac:Contact" class="grid-content">
                        <div class="item_col1">
                          <label
                            fd-form-label
                            for="input-message"
                            id="label-input"
                            >Telephone:</label
                          >
                          <input
                            fd-form-control
                            type="text"
                            class="form-control"
                            formControlName="cbc:Telephone"
                          />
                        </div>

                        <div class="item_col2">
                          <label
                            fd-form-label
                            for="input-message"
                            id="label-input"
                            >Email:</label
                          >
                          <input
                            fd-form-control
                            type="text"
                            class="form-control"
                            formControlName="cbc:ElectronicMail"
                          />
                        </div>
                      </div>
                    </div>
                  </fd-layout-grid>
                </div>
              </fd-panel>

              <fd-panel
                fdCompact
                expandAriaLabel="Panel Expand"
                expandAriaLabelledBy="panel-compact-2"
              >
                <h5 fd-panel-title id="panel-compact-2">PhysicalLocation</h5>
                <div
                  fd-panel-content
                  ariaLabel="Panel Content"
                  id="panel-content-2"
                >
                  <fd-layout-grid>
                    <div
                      *ngIf="transmitterForm.value.AdditionalAccountID !== ''"
                    >
                      <div>
                        <label
                          fd-form-label
                          for="input-message"
                          id="label-input"
                          >AdditionalAccountID:</label
                        >
                        <input
                          fd-form-control
                          type="text"
                          class="form-control"
                          formControlName="cbc:AdditionalAccountID"
                        />
                      </div>
                    </div>

                    <div
                      formGroupName="cac:Party"
                      *ngIf="transmitterForm.value.AdditionalAccountID !== ''"
                    >
                      <div formGroupName="cac:PhysicalLocation">
                        <div formGroupName="cac:Address">
                          <div
                            *ngIf="
                              infoJSON.Invoice['cac:AccountingSupplierParty']
                            "
                          >
                            <div class="flex-content">
                              <div
                                *ngFor="
                                  let item of infoJSON.Invoice[
                                    'cac:AccountingSupplierParty'
                                  ]['cac:Party']['cac:PhysicalLocation'][
                                    'cac:Address'
                                  ] | keyvalue
                                "
                              >
                                <div
                                  *ngIf="
                                    item.key === 'cbc:ID' ||
                                    item.key === 'cbc:CityName' ||
                                    item.key === 'cbc:PostalZone' ||
                                    item.key === 'cbc:CountrySubentity' ||
                                    item.key === 'cbc:CountrySubentityCode'
                                  "
                                  class="ms-1"
                                >
                                  <label
                                    fd-form-label
                                    for="input-message"
                                    id="label-input"
                                    >{{ item.key }}</label
                                  >
                                  <input
                                    fd-form-control
                                    type="text"
                                    class="form-control"
                                    formControlName="{{ item.key }}"
                                  />
                                </div>
                              </div>
                            </div>
                          </div>
                          <fd-layout-grid>
                            <div fdLayoutGridRow>
                              <div
                                formGroupName="cac:AddressLine"
                                [fdLayoutGridCol]="4"
                                class="mt-2"
                              >
                                <label
                                  fd-form-label
                                  for="input-message"
                                  id="label-input"
                                  >CountrySubentityCode:</label
                                >
                                <input
                                  fd-form-control
                                  type="text"
                                  class="form-control"
                                  formControlName="cbc:Line"
                                />
                              </div>

                              <div
                                formGroupName="cac:Country"
                                [fdLayoutGridCol]="8"
                              >
                                <div fdLayoutGridRow>
                                  <div [fdLayoutGridCol]="4">
                                    <label
                                      fd-form-label
                                      for="input-message"
                                      id="label-input"
                                      >IdentificationCode:</label
                                    >
                                    <input
                                      fd-form-control
                                      type="text"
                                      class="form-control"
                                      formControlName="cbc:IdentificationCode"
                                    />
                                  </div>

                                  <div
                                    formGroupName="cbc:Name"
                                    [fdLayoutGridCol]="4"
                                  >
                                    <div>
                                      <label
                                        fd-form-label
                                        for="input-message"
                                        id="label-input"
                                        >languageID:</label
                                      >
                                      <input
                                        fd-form-control
                                        type="text"
                                        class="form-control"
                                        formControlName="languageID"
                                      />
                                    </div>
                                  </div>

                                  <div
                                    formGroupName="cbc:Name"
                                    [fdLayoutGridCol]="4"
                                  >
                                    <div>
                                      <label
                                        fd-form-label
                                        for="input-message"
                                        id="label-input"
                                        >Country:</label
                                      >
                                      <input
                                        fd-form-control
                                        type="text"
                                        class="form-control"
                                        formControlName="cbc:Name"
                                      />
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </fd-layout-grid>
                        </div>
                      </div>
                    </div>
                  </fd-layout-grid>
                </div>
              </fd-panel>

              <fd-panel
                fdCompact
                expandAriaLabel="Panel Expand"
                expandAriaLabelledBy="panel-compact-3"
              >
                <h5 fd-panel-title id="panel-compact-3">PartyTaxScheme</h5>
                <div
                  fd-panel-content
                  ariaLabel="Panel Content"
                  id="panel-content-3"
                >
                  <fd-layout-grid>
                    <div fdLayoutGridRow>
                      <div formGroupName="cac:Party">
                        <div formGroupName="cac:PartyTaxScheme">
                          <div>
                            <label
                              fd-form-label
                              for="input-message"
                              id="label-input"
                              >RegistrationName:</label
                            >
                            <input
                              fd-form-control
                              type="text"
                              class="form-control"
                              formControlName="cbc:RegistrationName"
                            />
                          </div>

                          <div formGroupName="cbc:CompanyID">
                            <div
                              *ngIf="
                                infoJSON.Invoice['cac:AccountingSupplierParty']
                              "
                            >
                              <div class="flex-content">
                                <div
                                  *ngFor="
                                    let item of infoJSON.Invoice[
                                      'cac:AccountingSupplierParty'
                                    ]['cac:Party']['cac:PartyTaxScheme'][
                                      'cbc:CompanyID'
                                    ] | keyvalue
                                  "
                                  class="ms-1"
                                >
                                  <label
                                    fd-form-label
                                    for="input-message"
                                    id="label-input"
                                    >{{ item.key }}:
                                  </label>
                                  <input
                                    fd-form-control
                                    type="text"
                                    class="form-control"
                                    formControlName="{{ item.key }}"
                                  />
                                </div>
                              </div>
                            </div>
                          </div>

                          <div formGroupName="cbc:TaxLevelCode">
                            <div
                              *ngIf="
                                infoJSON.Invoice['cac:AccountingSupplierParty']
                              "
                            >
                              <div class="flex-content">
                                <div
                                  *ngFor="
                                    let item of infoJSON.Invoice[
                                      'cac:AccountingSupplierParty'
                                    ]['cac:Party']['cac:PartyTaxScheme'][
                                      'cbc:TaxLevelCode'
                                    ] | keyvalue
                                  "
                                  class="ms-1"
                                >
                                  <div>
                                    <label
                                      fd-form-label
                                      for="input-message"
                                      id="label-input"
                                      >{{ item.key }}:</label
                                    >
                                    <input
                                      fd-form-control
                                      type="text"
                                      class="form-control"
                                      formControlName="{{ item.key }}"
                                    />
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div formGroupName="cac:RegistrationAddress">
                            <div
                              *ngIf="
                                infoJSON.Invoice['cac:AccountingSupplierParty']
                              "
                            >
                              <div class="flex-content">
                                <div
                                  *ngFor="
                                    let item of infoJSON.Invoice[
                                      'cac:AccountingSupplierParty'
                                    ]['cac:Party']['cac:PartyTaxScheme'][
                                      'cac:RegistrationAddress'
                                    ] | keyvalue
                                  "
                                >
                                  <div
                                    *ngIf="
                                      item.key === 'cbc:ID' ||
                                      item.key === 'cbc:CityName' ||
                                      item.key === 'cbc:PostalZone' ||
                                      item.key === 'cbc:CountrySubentity' ||
                                      item.key === 'cbc:CountrySubentityCode'
                                    "
                                    class="ms-1"
                                  >
                                    <label
                                      fd-form-label
                                      for="input-message"
                                      id="label-input"
                                      >{{ item.key }}:</label
                                    >
                                    <input
                                      fd-form-control
                                      type="text"
                                      class="form-control"
                                      formControlName="{{ item.key }}"
                                    />
                                  </div>
                                </div>
                              </div>
                            </div>

                            <fd-layout-grid>
                              <div fdLayoutGridRow>
                                <div
                                  formGroupName="cac:AddressLine"
                                  [fdLayoutGridCol]="4"
                                  class="mt-2"
                                >
                                  <label
                                    fd-form-label
                                    for="input-message"
                                    id="label-input"
                                    >Line:</label
                                  >
                                  <input
                                    fd-form-control
                                    type="text"
                                    class="form-control"
                                    formControlName="cbc:Line"
                                  />
                                </div>

                                <div
                                  formGroupName="cac:Country"
                                  [fdLayoutGridCol]="8"
                                >
                                  <div fdLayoutGridRow>
                                    <div [fdLayoutGridCol]="4">
                                      <label
                                        fd-form-label
                                        for="input-message"
                                        id="label-input"
                                        >IdentificationCode:</label
                                      >
                                      <input
                                        fd-form-control
                                        type="text"
                                        class="form-control"
                                        formControlName="cbc:IdentificationCode"
                                      />
                                    </div>
                                    <div
                                      formGroupName="cbc:Name"
                                      [fdLayoutGridCol]="4"
                                    >
                                      <label
                                        fd-form-label
                                        for="input-message"
                                        id="label-input"
                                        >Name:</label
                                      >
                                      <input
                                        fd-form-control
                                        type="text"
                                        class="form-control"
                                        formControlName="cbc:Name"
                                      />
                                    </div>
                                    <div
                                      formGroupName="cbc:Name"
                                      [fdLayoutGridCol]="4"
                                    >
                                      <label
                                        fd-form-label
                                        for="input-message"
                                        id="label-input"
                                        >languageID:</label
                                      >
                                      <input
                                        fd-form-control
                                        type="text"
                                        class="form-control"
                                        formControlName="languageID"
                                      />
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </fd-layout-grid>
                          </div>

                          <fd-layout-grid>
                            <div [fdLayoutGridCol]="12">
                              <div fdLayoutGridRow>
                                <div
                                  formGroupName="cac:TaxScheme"
                                  [fdLayoutGridCol]="6"
                                >
                                  <div>
                                    <label
                                      fd-form-label
                                      for="input-message"
                                      id="label-input"
                                      >ID:</label
                                    >
                                    <input
                                      fd-form-control
                                      type="text"
                                      class="form-control"
                                      formControlName="cbc:ID"
                                    />
                                  </div>
                                </div>

                                <div
                                  formGroupName="cac:TaxScheme"
                                  [fdLayoutGridCol]="6"
                                >
                                  <div>
                                    <label
                                      fd-form-label
                                      for="input-message"
                                      id="label-input"
                                      >Name:</label
                                    >
                                    <input
                                      fd-form-control
                                      type="text"
                                      class="form-control"
                                      formControlName="cbc:Name"
                                    />
                                  </div>
                                </div>
                              </div>
                            </div>
                          </fd-layout-grid>
                        </div>
                      </div>
                    </div>
                  </fd-layout-grid>
                </div>
              </fd-panel>

              <fd-panel
                fdCompact
                expandAriaLabel="Panel Expand"
                expandAriaLabelledBy="panel-compact-4"
              >
                <h5 fd-panel-title id="panel-compact-4">PartyLegalEntity</h5>
                <div
                  fd-panel-content
                  ariaLabel="Panel Content"
                  id="panel-content-4"
                >
                  <fd-layout-grid>
                    <div fdLayoutGridRow>
                      <div formGroupName="cac:Party">
                        <div formGroupName="cac:PartyLegalEntity">
                          <label
                            fd-form-label
                            for="input-message"
                            id="label-input"
                            >RegistrationName:</label
                          >
                          <input
                            fd-form-control
                            type="text"
                            class="form-control"
                            formControlName="cbc:RegistrationName"
                          />

                          <div formGroupName="cbc:CompanyID">
                            <div
                              *ngIf="
                                infoJSON.Invoice['cac:AccountingSupplierParty']
                              "
                            >
                              <div class="flex-content">
                                <div
                                  *ngFor="
                                    let item of infoJSON.Invoice[
                                      'cac:AccountingSupplierParty'
                                    ]['cac:Party']['cac:PartyLegalEntity'][
                                      'cbc:CompanyID'
                                    ] | keyvalue
                                  "
                                  class="ms-1"
                                >
                                  <div>
                                    <label
                                      fd-form-label
                                      for="input-message"
                                      id="label-input"
                                      >{{ item.key }}</label
                                    >
                                    <input
                                      fd-form-control
                                      type="text"
                                      class="form-control"
                                      formControlName="{{ item.key }}"
                                    />
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div formGroupName="cac:CorporateRegistrationScheme">
                            <div
                              *ngIf="
                                infoJSON.Invoice['cac:AccountingSupplierParty']
                              "
                            >
                              <div class="flex-content">
                                <div
                                  *ngFor="
                                    let item of infoJSON.Invoice[
                                      'cac:AccountingSupplierParty'
                                    ]['cac:Party']['cac:PartyLegalEntity'][
                                      'cac:CorporateRegistrationScheme'
                                    ] | keyvalue
                                  "
                                  class="ms-1"
                                >
                                  <div>
                                    <label
                                      fd-form-label
                                      for="input-message"
                                      id="label-input"
                                      >{{ item.key }}</label
                                    >
                                    <input
                                      fd-form-control
                                      type="text"
                                      class="form-control"
                                      formControlName="{{ item.key }}"
                                    />
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </fd-layout-grid>
                </div>
              </fd-panel>
            </form>

            <!-- Receptor -->

            <form [formGroup]="receiverForm" *ngIf="step.label === 'Receptor'">
              <fd-panel
                fdCompact
                expandAriaLabel="Panel Expand"
                expandAriaLabelledBy="panel-compact-1"
              >
                <h5 fd-panel-title id="panel-compact-1">
                  Party general information
                </h5>
                <div
                  fd-panel-content
                  ariaLabel="Panel Content"
                  id="panel-content-1"
                >
                  <fd-layout-grid>
                    <div
                      *ngIf="transmitterForm.value.AdditionalAccountID !== ''"
                    >
                      <div>
                        <label
                          fd-form-label
                          for="input-message"
                          id="label-input"
                          >AdditionalAccountID:</label
                        >
                        <input
                          fd-form-control
                          type="text"
                          class="form-control"
                          formControlName="cbc:AdditionalAccountID"
                        />
                      </div>
                    </div>

                    <div
                      formGroupName="cac:Party"
                      *ngIf="transmitterForm.value.AdditionalAccountID !== ''"
                    >
                      <div formGroupName="cac:PartyName" class="margin_name">
                        <label
                          fd-form-label
                          for="input-message"
                          id="label-input"
                          >Name:</label
                        >
                        <input
                          fd-form-control
                          type="text"
                          class="form-control"
                          formControlName="cbc:Name"
                        />
                      </div>
                    </div>

                    <div
                      formGroupName="cac:Party"
                      *ngIf="transmitterForm.value.AdditionalAccountID !== ''"
                    >
                      <div formGroupName="cac:Contact" class="grid-content">
                        <div class="item_col1">
                          <label
                            fd-form-label
                            for="input-message"
                            id="label-input"
                            >Telephone:</label
                          >
                          <input
                            fd-form-control
                            type="text"
                            class="form-control"
                            formControlName="cbc:Telephone"
                          />
                        </div>

                        <div class="item_col2">
                          <label
                            fd-form-label
                            for="input-message"
                            id="label-input"
                            >Email:</label
                          >
                          <input
                            fd-form-control
                            type="text"
                            class="form-control"
                            formControlName="cbc:ElectronicMail"
                          />
                        </div>
                      </div>
                    </div>
                  </fd-layout-grid>
                </div>
              </fd-panel>

              <fd-panel
                fdCompact
                expandAriaLabel="Panel Expand"
                expandAriaLabelledBy="panel-compact-2"
              >
                <h5 fd-panel-title id="panel-compact-2">PhysicalLocation</h5>
                <div
                  fd-panel-content
                  ariaLabel="Panel Content"
                  id="panel-content-2"
                >
                  <fd-layout-grid>
                    <div
                      *ngIf="transmitterForm.value.AdditionalAccountID !== ''"
                    >
                      <div>
                        <label
                          fd-form-label
                          for="input-message"
                          id="label-input"
                          >AdditionalAccountID:</label
                        >
                        <input
                          fd-form-control
                          type="text"
                          class="form-control"
                          formControlName="cbc:AdditionalAccountID"
                        />
                      </div>
                    </div>

                    <div
                      formGroupName="cac:Party"
                      *ngIf="transmitterForm.value.AdditionalAccountID !== ''"
                    >
                      <div formGroupName="cac:PhysicalLocation">
                        <div formGroupName="cac:Address">
                          <div class="grid-content">
                            <div class="item_col1">
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >ID:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:ID"
                              />
                            </div>

                            <div class="item_col2">
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >CityName:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:CityName"
                              />
                            </div>

                            <div class="item_col3">
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >PostalZone:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:PostalZone"
                              />
                            </div>

                            <div class="item_row1 item_col4">
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >CountrySubentity:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:CountrySubentity"
                              />
                            </div>

                            <div class="item_row2 item_col1">
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >CountrySubentityCode:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:CountrySubentityCode"
                              />
                            </div>

                            <div
                              formGroupName="cac:AddressLine"
                              class="item_row2 item_col2"
                            >
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >CountrySubentityCode:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:Line"
                              />
                            </div>

                            <div formGroupName="cac:Country">
                              <div formGroupName="cbc:Name">
                                <div class="item_row2 item_col3">
                                  <label
                                    fd-form-label
                                    for="input-message"
                                    id="label-input"
                                    >languageID:</label
                                  >
                                  <input
                                    fd-form-control
                                    type="text"
                                    class="form-control"
                                    formControlName="languageID"
                                  />
                                </div>
                              </div>
                            </div>

                            <div formGroupName="cac:Country">
                              <div formGroupName="cbc:Name">
                                <div class="item_row2 item_col4">
                                  <label
                                    fd-form-label
                                    for="input-message"
                                    id="label-input"
                                    >Country:</label
                                  >
                                  <input
                                    fd-form-control
                                    type="text"
                                    class="form-control"
                                    formControlName="cbc:Name"
                                  />
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </fd-layout-grid>
                </div>
              </fd-panel>

              <fd-panel
                fdCompact
                expandAriaLabel="Panel Expand"
                expandAriaLabelledBy="panel-compact-3"
              >
                <h5 fd-panel-title id="panel-compact-3">PartyTaxScheme</h5>
                <div
                  fd-panel-content
                  ariaLabel="Panel Content"
                  id="panel-content-3"
                >
                  <fd-layout-grid>
                    <div fdLayoutGridRow>
                      <div formGroupName="cac:Party">
                        <div formGroupName="cac:PartyTaxScheme">
                          <div fdLayoutGridCol colGrow>
                            <label
                              fd-form-label
                              for="input-message"
                              id="label-input"
                              >RegistrationName:</label
                            >
                            <input
                              fd-form-control
                              type="text"
                              class="form-control"
                              formControlName="cbc:RegistrationName"
                            />
                          </div>
                          <div formGroupName="cbc:CompanyID">
                            <div
                              *ngIf="
                                infoJSON.Invoice['cac:AccountingCustomerParty']
                              "
                            >
                              <div class="flex-content">
                                <div
                                  *ngFor="
                                    let item of infoJSON.Invoice[
                                      'cac:AccountingCustomerParty'
                                    ]['cac:Party']['cac:PartyTaxScheme'][
                                      'cbc:CompanyID'
                                    ] | keyvalue
                                  "
                                  class="ms-1"
                                >
                                  <label
                                    fd-form-label
                                    for="input-message"
                                    id="label-input"
                                    >{{ item.key }}:
                                  </label>
                                  <input
                                    fd-form-control
                                    type="text"
                                    class="form-control"
                                    formControlName="{{ item.key }}"
                                  />
                                </div>
                              </div>
                            </div>
                          </div>

                          <div formGroupName="cbc:TaxLevelCode">
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >listName:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="listName"
                              />
                            </div>
                            <div>
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >TaxLevelCode:</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="cbc:TaxLevelCode"
                              />
                            </div>
                          </div>

                          <div formGroupName="cac:RegistrationAddress">
                            <div
                              *ngIf="
                                infoJSON.Invoice['cac:AccountingCustomerParty']
                              "
                            >
                              <div class="flex-content">
                                <div
                                  *ngFor="
                                    let item of infoJSON.Invoice[
                                      'cac:AccountingCustomerParty'
                                    ]['cac:Party']['cac:PartyTaxScheme'][
                                      'cac:RegistrationAddress'
                                    ] | keyvalue
                                  "
                                >
                                  <div
                                    *ngIf="
                                      item.key === 'cbc:ID' ||
                                      item.key === 'cbc:CityName' ||
                                      item.key === 'cbc:PostalZone' ||
                                      item.key === 'cbc:CountrySubentity' ||
                                      item.key === 'cbc:CountrySubentityCode'
                                    "
                                    class="ms-1"
                                  >
                                    <label
                                      fd-form-label
                                      for="input-message"
                                      id="label-input"
                                      >{{ item.key }}:</label
                                    >
                                    <input
                                      fd-form-control
                                      type="text"
                                      class="form-control"
                                      formControlName="{{ item.key }}"
                                    />
                                  </div>
                                </div>
                              </div>
                            </div>

                            <fd-layout-grid>
                              <div fdLayoutGridRow>
                                <div
                                  formGroupName="cac:AddressLine"
                                  [fdLayoutGridCol]="4"
                                  class="mt-2"
                                >
                                  <label
                                    fd-form-label
                                    for="input-message"
                                    id="label-input"
                                    >Line:</label
                                  >
                                  <input
                                    fd-form-control
                                    type="text"
                                    class="form-control"
                                    formControlName="cbc:Line"
                                  />
                                </div>

                                <div
                                  formGroupName="cac:Country"
                                  [fdLayoutGridCol]="8"
                                >
                                  <div fdLayoutGridRow>
                                    <div [fdLayoutGridCol]="4">
                                      <label
                                        fd-form-label
                                        for="input-message"
                                        id="label-input"
                                        >IdentificationCode:</label
                                      >
                                      <input
                                        fd-form-control
                                        type="text"
                                        class="form-control"
                                        formControlName="cbc:IdentificationCode"
                                      />
                                    </div>
                                    <div
                                      formGroupName="cbc:Name"
                                      [fdLayoutGridCol]="4"
                                    >
                                      <div>
                                        <label
                                          fd-form-label
                                          for="input-message"
                                          id="label-input"
                                          >Name:</label
                                        >
                                        <input
                                          fd-form-control
                                          type="text"
                                          class="form-control"
                                          formControlName="cbc:Name"
                                        />
                                      </div>
                                    </div>
                                    <div
                                      formGroupName="cbc:Name"
                                      [fdLayoutGridCol]="4"
                                    >
                                      <label
                                        fd-form-label
                                        for="input-message"
                                        id="label-input"
                                        >languageID:</label
                                      >
                                      <input
                                        fd-form-control
                                        type="text"
                                        class="form-control"
                                        formControlName="languageID"
                                      />
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </fd-layout-grid>
                          </div>

                          <fd-layout-grid>
                            <div [fdLayoutGridCol]="12">
                              <div fdLayoutGridRow>
                                <div
                                  formGroupName="cac:TaxScheme"
                                  [fdLayoutGridCol]="6"
                                >
                                  <div>
                                    <label
                                      fd-form-label
                                      for="input-message"
                                      id="label-input"
                                      >ID:</label
                                    >
                                    <input
                                      fd-form-control
                                      type="text"
                                      class="form-control"
                                      formControlName="cbc:ID"
                                    />
                                  </div>
                                </div>

                                <div
                                  formGroupName="cac:TaxScheme"
                                  [fdLayoutGridCol]="6"
                                >
                                  <div>
                                    <label
                                      fd-form-label
                                      for="input-message"
                                      id="label-input"
                                      >Name:</label
                                    >
                                    <input
                                      fd-form-control
                                      type="text"
                                      class="form-control"
                                      formControlName="cbc:Name"
                                    />
                                  </div>
                                </div>
                              </div>
                            </div>
                          </fd-layout-grid>
                        </div>
                      </div>
                    </div>
                  </fd-layout-grid>
                </div>
              </fd-panel>

              <fd-panel
                fdCompact
                expandAriaLabel="Panel Expand"
                expandAriaLabelledBy="panel-compact-4"
              >
                <h5 fd-panel-title id="panel-compact-4">PartyLegalEntity</h5>
                <div
                  fd-panel-content
                  ariaLabel="Panel Content"
                  id="panel-content-4"
                >
                  <fd-layout-grid>
                    <div fdLayoutGridRow>
                      <div formGroupName="cac:Party">
                        <div formGroupName="cac:PartyLegalEntity">
                          <label
                            fd-form-label
                            for="input-message"
                            id="label-input"
                            >RegistrationName:</label
                          >
                          <input
                            fd-form-control
                            type="text"
                            class="form-control"
                            formControlName="cbc:RegistrationName"
                          />

                          <div formGroupName="cbc:CompanyID">
                            <div
                              *ngIf="
                                infoJSON.Invoice['cac:AccountingCustomerParty']
                              "
                            >
                              <div class="flex-content">
                                <div
                                  *ngFor="
                                    let item of infoJSON.Invoice[
                                      'cac:AccountingCustomerParty'
                                    ]['cac:Party']['cac:PartyLegalEntity'][
                                      'cbc:CompanyID'
                                    ] | keyvalue
                                  "
                                  class="ms-1"
                                >
                                  <div>
                                    <label
                                      fd-form-label
                                      for="input-message"
                                      id="label-input"
                                      >{{ item.key }}</label
                                    >
                                    <input
                                      fd-form-control
                                      type="text"
                                      class="form-control"
                                      formControlName="{{ item.key }}"
                                    />
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>

                          <!-- Ejemplo para mapear los valores que vengan en el objetoooo -->

                          <div formGroupName="cac:CorporateRegistrationScheme">
                            <div
                              *ngIf="
                                infoJSON.Invoice['cac:AccountingCustomerParty']
                              "
                            >
                              <div class="flex-content">
                                <div
                                  *ngFor="
                                    let item of infoJSON.Invoice[
                                      'cac:AccountingCustomerParty'
                                    ]['cac:Party']['cac:PartyLegalEntity'][
                                      'cac:CorporateRegistrationScheme'
                                    ] | keyvalue
                                  "
                                  class="ms-1"
                                >
                                  <div>
                                    <label
                                      fd-form-label
                                      for="input-message"
                                      id="label-input"
                                      >{{ changeName(item.key) }}</label
                                    >
                                    <input
                                      fd-form-control
                                      type="text"
                                      class="form-control"
                                      formControlName="{{ item.key }}"
                                    />
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </fd-layout-grid>
                </div>
              </fd-panel>
            </form>

            <!-- Formas de pago -->

            <form
              [formGroup]="$any(paymentMeansForm)"
              *ngIf="step.label === 'Formas de pago'"
            >
              <fd-layout-grid>
                <div
                  *ngFor="let means of paymentMeansForm.value; let i = index"
                  fdLayoutGridRow
                  [formGroupName]="i"
                >
                  <div
                    *ngFor="let item of means | keyvalue"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div class="form-group col animation-element align">
                      <label fd-form-label for="input-message" id="label-input"
                        >{{ changeName(item.key) }} :
                      </label>
                      <input
                        fd-form-control
                        type="text"
                        class="form-control"
                        formControlName="{{ item.key }}"
                      />
                    </div>
                  </div>
                </div>
              </fd-layout-grid>
              <div class="row row-cols-1 row-cols-md-2 spacing">
                <button
                  *ngIf="!dataJSON.Invoice['cac:PaymentMeans']"
                  fd-button
                  fdCompact
                  type="button"
                  fdType="emphasized"
                  (click)="enableSection('enablePaymentMeansForm')"
                >
                  Habilitar
                </button>
                <button
                  *ngIf="!dataJSON.Invoice['cac:PaymentMeans']"
                  fd-button
                  fdCompact
                  fdType="emphasized"
                  type="button"
                  (click)="addPaymentMeans()"
                >
                  Agregar
                </button>
              </div>
            </form>

            <!-- Descuentos -->

            <form
              [formGroup]="$any(discountsForm)"
              *ngIf="step.label === 'Descuentos'"
            >
              <fd-layout-grid>
                <div
                  *ngFor="
                    let means of infoJSON.Invoice['cac:AllowanceCharge'];
                    let i = index
                  "
                  fdLayoutGridRow
                  [formGroupName]="i"
                >
                  <div
                    *ngFor="let item of means | keyvalue"
                    [fdLayoutGridCol]="12"
                    [colMd]="6"
                    [colLg]="4"
                    [colXl]="3"
                  >
                    <div
                      *ngIf="
                        !(
                          item.key === 'cbc:Amount' ||
                          item.key === 'cbc:BaseAmount'
                        )
                      "
                      class="form-group col animation-element align"
                    >
                      <label fd-form-label for="input-message" id="label-input"
                        >{{ changeName(item.key) }}:
                      </label>
                      <input
                        fd-form-control
                        type="text"
                        class="form-control"
                        formControlName="{{ item.key }}"
                      />
                    </div>
                    <div
                      *ngIf="item.key === 'cbc:Amount'"
                      class="form-group col animation-element align"
                    >
                      <div formGroupName="cbc:Amount">
                        <div *ngIf="infoJSON.Invoice['cac:AllowanceCharge']">
                          <div
                            *ngFor="
                              let itemAmount of infoJSON.Invoice[
                                'cac:AllowanceCharge'
                              ][i]['cbc:Amount'] | keyvalue
                            "
                          >
                            <label
                              fd-form-label
                              for="input-message"
                              id="label-input"
                              >{{ changeName(itemAmount.key) }}:
                            </label>
                            <input
                              fd-form-control
                              type="text"
                              class="form-control"
                              formControlName="{{ itemAmount.key }}"
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                    <div
                      *ngIf="item.key === 'cbc:BaseAmount'"
                      class="form-group col animation-element align"
                    >
                      <div formGroupName="cbc:BaseAmount">
                        <div *ngIf="infoJSON.Invoice['cac:AllowanceCharge']">
                          <div class="flex-content">
                            <div
                              *ngFor="
                                let itemAmount of infoJSON.Invoice[
                                  'cac:AllowanceCharge'
                                ][i]['cbc:BaseAmount'] | keyvalue
                              "
                            >
                              <label
                                fd-form-label
                                for="input-message"
                                id="label-input"
                                >{{ changeName(itemAmount.key) }}:
                              </label>
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="{{ itemAmount.key }}"
                              />
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </fd-layout-grid>
            </form>

            <!-- Tributos de impuestos-->
            <form
              [formGroup]="$any(tributesForm)"
              *ngIf="step.label === 'Tributos de impuestos'"
            >
              <fd-layout-grid>
                <div
                  *ngFor="
                    let tax of this.infoJSON.Invoice['cac:TaxTotal'];
                    let i = index
                  "
                  fdLayoutGridRow
                  [formGroupName]="i"
                >
                  <div class="flex-content">
                    <div *ngFor="let mean of tax | keyvalue">
                      <div *ngIf="mean.key === 'cbc:TaxAmount'">
                        <div formGroupName="cbc:TaxAmount">
                          <div *ngIf="infoJSON.Invoice['cac:TaxTotal']">
                            <div class="flex-content">
                              <div
                                *ngFor="
                                  let itemAmount of infoJSON.Invoice[
                                    'cac:TaxTotal'
                                  ][i]['cbc:TaxAmount'] | keyvalue
                                "
                                class="ms-1"
                              >
                                <label
                                  fd-form-label
                                  id="label-input"
                                  for="input-message"
                                  >{{ changeName(itemAmount.key) }}</label
                                >
                                <input
                                  fd-form-control
                                  type="text"
                                  class="form-control"
                                  formControlName="{{ itemAmount.key }}"
                                />
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div *ngIf="mean.key === 'cbc:RoundingAmount'">
                        <div formGroupName="cbc:RoundingAmount">
                          <div *ngIf="infoJSON.Invoice['cac:TaxTotal']">
                            <div class="flex-content">
                              <div
                                *ngFor="
                                  let itemRoundingAmount of infoJSON.Invoice[
                                    'cac:TaxTotal'
                                  ][i]['cbc:RoundingAmount'] | keyvalue
                                "
                                class="ms-1"
                              >
                                <label
                                  fd-form-label
                                  for="input-message"
                                  id="label-input"
                                  >{{
                                    changeName(itemRoundingAmount.key)
                                  }}</label
                                >
                                <input
                                  fd-form-control
                                  type="text"
                                  class="form-control"
                                  formControlName="{{ itemRoundingAmount.key }}"
                                />
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div *ngIf="mean.key === 'cac:TaxSubtotal'">
                        <div formArrayName="cac:TaxSubtotal">
                          <div *ngIf="infoJSON.Invoice['cac:TaxTotal']">
                            <div *ngIf="infoJSON.Invoice['cac:TaxTotal'][i]">
                              <div
                                *ngIf="
                                  infoJSON.Invoice['cac:TaxTotal'][i][
                                    'cac:TaxSubtotal'
                                  ]
                                "
                                style="margin-left: 12px"
                              >
                                <div class="flex-content">
                                  <div
                                    *ngFor="
                                      let itemSubTotal of infoJSON.Invoice[
                                        'cac:TaxTotal'
                                      ][i]['cac:TaxSubtotal'];
                                      let indexSubTotal = index
                                    "
                                    [formGroupName]="indexSubTotal"
                                    class="ms-1"
                                  >
                                    <div formGroupName="cbc:TaxableAmount">
                                      <div class="flex-content">
                                        <div
                                          *ngFor="
                                            let itemTaxable of infoJSON.Invoice[
                                              'cac:TaxTotal'
                                            ][i]['cac:TaxSubtotal'][
                                              indexSubTotal
                                            ]['cbc:TaxableAmount'] | keyvalue
                                          "
                                          class="ms-1"
                                        >
                                          <label
                                            fd-form-label
                                            for="input-message"
                                            id="label-input"
                                            >{{ changeName(itemTaxable.key) }}:
                                          </label>
                                          <input
                                            fd-form-control
                                            type="text"
                                            class="form-control"
                                            formControlName="{{
                                              itemTaxable.key
                                            }}"
                                          />
                                        </div>
                                      </div>
                                    </div>
                                    <div formGroupName="cbc:TaxAmount">
                                      <div class="flex-content">
                                        <div
                                          *ngFor="
                                            let itemAmount of infoJSON.Invoice[
                                              'cac:TaxTotal'
                                            ][i]['cac:TaxSubtotal'][
                                              indexSubTotal
                                            ]['cbc:TaxAmount'] | keyvalue
                                          "
                                        >
                                          <label
                                            fd-form-label
                                            for="input-message"
                                            id="label-input"
                                            >{{ changeName(itemAmount.key) }}:
                                          </label>
                                          <input
                                            fd-form-control
                                            type="text"
                                            class="form-control"
                                            formControlName="{{
                                              itemAmount.key
                                            }}"
                                          />
                                        </div>
                                      </div>
                                    </div>
                                    <div formGroupName="cac:TaxCategory">
                                      <div
                                        *ngFor="
                                          let itemCategory of infoJSON.Invoice[
                                            'cac:TaxTotal'
                                          ][i]['cac:TaxSubtotal'][
                                            indexSubTotal
                                          ]['cac:TaxCategory'] | keyvalue
                                        "
                                      >
                                        <div
                                          *ngIf="
                                            itemCategory.key === 'cac:TaxScheme'
                                          "
                                        >
                                          <div formGroupName="cac:TaxScheme">
                                            <div
                                              *ngFor="
                                                let itemScheme of infoJSON
                                                  .Invoice['cac:TaxTotal'][i][
                                                  'cac:TaxSubtotal'
                                                ][indexSubTotal][
                                                  'cac:TaxCategory'
                                                ]['cac:TaxScheme'] | keyvalue
                                              "
                                            >
                                              <label
                                                fd-form-label
                                                for="input-message"
                                                id="label-input"
                                                >{{
                                                  changeName(itemScheme.key)
                                                }}:
                                              </label>
                                              <input
                                                fd-form-control
                                                type="text"
                                                class="form-control"
                                                formControlName="{{
                                                  itemScheme.key
                                                }}"
                                              />
                                            </div>
                                          </div>
                                        </div>
                                        <div
                                          *ngIf="
                                            itemCategory.key === 'cbc:Percent'
                                          "
                                        >
                                          <label
                                            fd-form-label
                                            for="input-message"
                                            id="label-input"
                                            >{{ changeName(itemCategory.key) }}:
                                          </label>
                                          <input
                                            fd-form-control
                                            type="text"
                                            class="form-control"
                                            formControlName="{{
                                              itemCategory.key
                                            }}"
                                          />
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </fd-layout-grid>
            </form>
            <!-- Retenciones -->

            <form
              [formGroup]="$any(retentionsForm)"
              *ngIf="step.label === 'Retenciones'"
            >
              <fd-layout-grid style="margin-left: 4px">
                <div
                  *ngFor="
                    let means of infoJSON.Invoice['cac:WithholdingTaxTotal'];
                    let i = index
                  "
                  fdLayoutGridRow
                  [formGroupName]="i"
                >
                  <div class="flex-content">
                    <div *ngFor="let item of means | keyvalue">
                      <div *ngIf="item.key === 'cbc:TaxAmount'">
                        <div>
                          <div formGroupName="cbc:TaxAmount">
                            <div
                              *ngIf="
                                infoJSON.Invoice['cac:WithholdingTaxTotal']
                              "
                            >
                              <div class="flex-content">
                                <div
                                  *ngFor="
                                    let itemAmount of infoJSON.Invoice[
                                      'cac:WithholdingTaxTotal'
                                    ][i]['cbc:TaxAmount'] | keyvalue
                                  "
                                >
                                  <div class="ms-1">
                                    <label
                                      fd-form-label
                                      for="input-message"
                                      id="label-input"
                                      >{{ changeName(itemAmount.key) }}:
                                    </label>
                                    <input
                                      fd-form-control
                                      type="text"
                                      class="form-control"
                                      formControlName="{{ itemAmount.key }}"
                                    />
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div *ngIf="item.key === 'cac:TaxSubtotal'">
                        <div>
                          <div formArrayName="cac:TaxSubtotal">
                            <div
                              *ngIf="
                                infoJSON.Invoice['cac:WithholdingTaxTotal']
                              "
                            >
                              <div
                                *ngIf="
                                  infoJSON.Invoice['cac:WithholdingTaxTotal'][i]
                                "
                              >
                                <div
                                  *ngIf="
                                    infoJSON.Invoice['cac:WithholdingTaxTotal'][
                                      i
                                    ]['cac:TaxSubtotal']
                                  "
                                >
                                  <div class="flex-content">
                                    <div
                                      *ngFor="
                                        let itemSubTotal of infoJSON.Invoice[
                                          'cac:WithholdingTaxTotal'
                                        ][i]['cac:TaxSubtotal'];
                                        let indexSubTotal = index
                                      "
                                      [formGroupName]="indexSubTotal"
                                      class="ms-1"
                                    >
                                      <div formGroupName="cbc:TaxableAmount">
                                        <div class="flex-content">
                                          <div
                                            *ngFor="
                                              let itemTaxable of infoJSON
                                                .Invoice[
                                                'cac:WithholdingTaxTotal'
                                              ][i]['cac:TaxSubtotal'][
                                                indexSubTotal
                                              ]['cbc:TaxableAmount'] | keyvalue
                                            "
                                            class="ms-1"
                                          >
                                            <label
                                              fd-form-label
                                              for="input-message"
                                              id="label-input"
                                              >{{
                                                changeName(itemTaxable.key)
                                              }}:
                                            </label>
                                            <input
                                              fd-form-control
                                              type="text"
                                              class="form-control"
                                              formControlName="{{
                                                itemTaxable.key
                                              }}"
                                            />
                                          </div>
                                        </div>
                                      </div>
                                      <div formGroupName="cbc:TaxAmount">
                                        <div class="flex-content">
                                          <div
                                            *ngFor="
                                              let itemAmount of infoJSON
                                                .Invoice[
                                                'cac:WithholdingTaxTotal'
                                              ][i]['cac:TaxSubtotal'][
                                                indexSubTotal
                                              ]['cbc:TaxAmount'] | keyvalue
                                            "
                                            class="ms-1"
                                          >
                                            <label
                                              fd-form-label
                                              for="input-message"
                                              id="label-input"
                                              >{{ changeName(itemAmount.key) }}:
                                            </label>
                                            <input
                                              fd-form-control
                                              type="text"
                                              class="form-control"
                                              formControlName="{{
                                                itemAmount.key
                                              }}"
                                            />
                                          </div>
                                        </div>
                                      </div>
                                      <div formGroupName="cac:TaxCategory">
                                        <div
                                          *ngFor="
                                            let itemCategory of infoJSON
                                              .Invoice[
                                              'cac:WithholdingTaxTotal'
                                            ][i]['cac:TaxSubtotal'][
                                              indexSubTotal
                                            ]['cac:TaxCategory'] | keyvalue
                                          "
                                          class="ms-1"
                                        >
                                          <div
                                            *ngIf="
                                              itemCategory.key ===
                                              'cac:TaxScheme'
                                            "
                                          >
                                            <div formGroupName="cac:TaxScheme">
                                              <div class="flex-content">
                                                <div
                                                  *ngFor="
                                                    let itemScheme of infoJSON
                                                      .Invoice[
                                                      'cac:WithholdingTaxTotal'
                                                    ][i]['cac:TaxSubtotal'][
                                                      indexSubTotal
                                                    ]['cac:TaxCategory'][
                                                      'cac:TaxScheme'
                                                    ] | keyvalue
                                                  "
                                                  class="ms-1"
                                                >
                                                  <label
                                                    fd-form-label
                                                    for="input-message"
                                                    id="label-input"
                                                    >{{
                                                      changeName(
                                                        itemScheme.key
                                                      )
                                                    }}:
                                                  </label>
                                                  <input
                                                    fd-form-control
                                                    type="text"
                                                    class="form-control"
                                                    formControlName="{{
                                                      itemScheme.key
                                                    }}"
                                                  />
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                          <div
                                            *ngIf="
                                              itemCategory.key === 'cbc:Percent'
                                            "
                                          >
                                            <label
                                              fd-form-label
                                              for="input-message"
                                              id="label-input"
                                              >{{
                                                changeName(itemCategory.key)
                                              }}:
                                            </label>
                                            <input
                                              fd-form-control
                                              type="text"
                                              class="form-control"
                                              formControlName="{{
                                                itemCategory.key
                                              }}"
                                            />
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </fd-layout-grid>
            </form>

            <!-- Totales -->

            <form [formGroup]="totalForm" *ngIf="step.label === 'Totales'">
              <fd-layout-grid>
                <div
                  *ngIf="
                    infoJSON.Invoice['cac:LegalMonetaryTotal'] &&
                    infoJSON.Invoice['cac:LegalMonetaryTotal'][
                      'cbc:LineExtensionAmount'
                    ]
                  "
                >
                  <div formGroupName="cbc:LineExtensionAmount">
                    <div *ngIf="infoJSON.Invoice['cac:LegalMonetaryTotal']">
                      <div class="flex-content">
                        <div
                          *ngFor="
                            let item of infoJSON.Invoice[
                              'cac:LegalMonetaryTotal'
                            ]['cbc:LineExtensionAmount'] | keyvalue
                          "
                          class="ms-1"
                        >
                          <div>
                            <label
                              fd-form-label
                              for="input-message"
                              id="label-input"
                              >{{ changeName(item.key) }}</label
                            >
                            <input
                              fd-form-control
                              type="text"
                              class="form-control"
                              formControlName="{{ item.key }}"
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div
                  *ngIf="
                    infoJSON.Invoice['cac:LegalMonetaryTotal'] &&
                    infoJSON.Invoice['cac:LegalMonetaryTotal'][
                      'cbc:TaxExclusiveAmount'
                    ]
                  "
                >
                  <div formGroupName="cbc:TaxExclusiveAmount">
                    <div *ngIf="infoJSON.Invoice['cac:LegalMonetaryTotal']">
                      <div class="flex-content">
                        <div
                          *ngFor="
                            let item of infoJSON.Invoice[
                              'cac:LegalMonetaryTotal'
                            ]['cbc:TaxExclusiveAmount'] | keyvalue
                          "
                          class="ms-1"
                        >
                          <div>
                            <label
                              fd-form-label
                              for="input-message"
                              id="label-input"
                              >{{ changeName(item.key) }}</label
                            >
                            <input
                              fd-form-control
                              type="text"
                              class="form-control"
                              formControlName="{{ item.key }}"
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div
                  *ngIf="
                    infoJSON.Invoice['cac:LegalMonetaryTotal'] &&
                    infoJSON.Invoice['cac:LegalMonetaryTotal'][
                      'cbc:TaxInclusiveAmount'
                    ]
                  "
                >
                  <div formGroupName="cbc:TaxInclusiveAmount">
                    <div *ngIf="infoJSON.Invoice['cac:LegalMonetaryTotal']">
                      <div class="flex-content">
                        <div
                          *ngFor="
                            let item of infoJSON.Invoice[
                              'cac:LegalMonetaryTotal'
                            ]['cbc:TaxInclusiveAmount'] | keyvalue
                          "
                          class="ms-1"
                        >
                          <div>
                            <label
                              fd-form-label
                              for="input-message"
                              id="label-input"
                              >{{ changeName(item.key) }}</label
                            >
                            <input
                              fd-form-control
                              type="text"
                              class="form-control"
                              formControlName="{{ item.key }}"
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div
                  *ngIf="
                    infoJSON.Invoice['cac:LegalMonetaryTotal'] &&
                    infoJSON.Invoice['cac:LegalMonetaryTotal'][
                      'cbc:AllowanceTotalAmount'
                    ]
                  "
                >
                  <div formGroupName="cbc:AllowanceTotalAmount">
                    <div *ngIf="infoJSON.Invoice['cac:LegalMonetaryTotal']">
                      <div class="flex-content">
                        <div
                          *ngFor="
                            let item of infoJSON.Invoice[
                              'cac:LegalMonetaryTotal'
                            ]['cbc:AllowanceTotalAmount'] | keyvalue
                          "
                          class="ms-1"
                        >
                          <div>
                            <label
                              fd-form-label
                              for="input-message"
                              id="label-input"
                              >{{ changeName(item.key) }}</label
                            >
                            <input
                              fd-form-control
                              type="text"
                              class="form-control"
                              formControlName="{{ item.key }}"
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div
                  *ngIf="
                    infoJSON.Invoice['cac:LegalMonetaryTotal'] &&
                    infoJSON.Invoice['cac:LegalMonetaryTotal'][
                      'cbc:ChargeTotalAmount'
                    ]
                  "
                >
                  <div formGroupName="cbc:ChargeTotalAmount">
                    <div *ngIf="infoJSON.Invoice['cac:LegalMonetaryTotal']">
                      <div class="flex-content">
                        <div
                          *ngFor="
                            let item of infoJSON.Invoice[
                              'cac:LegalMonetaryTotal'
                            ]['cbc:ChargeTotalAmount'] | keyvalue
                          "
                          class="ms-1"
                        >
                          <div>
                            <label
                              fd-form-label
                              for="input-message"
                              id="label-input"
                              >{{ changeName(item.key) }}</label
                            >
                            <input
                              fd-form-control
                              type="text"
                              class="form-control"
                              formControlName="{{ item.key }}"
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div
                  *ngIf="
                    infoJSON.Invoice['cac:LegalMonetaryTotal'] &&
                    infoJSON.Invoice['cac:LegalMonetaryTotal'][
                      'cbc:PrePaidAmountAmount'
                    ]
                  "
                >
                  <div formGroupName="cbc:PrePaidAmountAmount">
                    <div *ngIf="infoJSON.Invoice['cac:LegalMonetaryTotal']">
                      <div class="flex-content">
                        <div
                          *ngFor="
                            let item of infoJSON.Invoice[
                              'cac:LegalMonetaryTotal'
                            ]['cbc:PrePaidAmountAmount'] | keyvalue
                          "
                          class="ms-1"
                        >
                          <div>
                            <label
                              fd-form-label
                              for="input-message"
                              id="label-input"
                              >{{ changeName(item.key) }}</label
                            >
                            <input
                              fd-form-control
                              type="text"
                              class="form-control"
                              formControlName="{{ item.key }}"
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div
                  *ngIf="
                    infoJSON.Invoice['cac:LegalMonetaryTotal'] &&
                    infoJSON.Invoice['cac:LegalMonetaryTotal'][
                      'cbc:PayableRoundingAmount'
                    ]
                  "
                >
                  <div formGroupName="cbc:PayableRoundingAmount">
                    <div *ngIf="infoJSON.Invoice['cac:LegalMonetaryTotal']">
                      <div class="flex-content">
                        <div
                          *ngFor="
                            let item of infoJSON.Invoice[
                              'cac:LegalMonetaryTotal'
                            ]['cbc:PayableRoundingAmount'] | keyvalue
                          "
                          class="ms-1"
                        >
                          <div>
                            <label
                              fd-form-label
                              for="input-message"
                              id="label-input"
                              >{{ changeName(item.key) }}</label
                            >
                            <input
                              fd-form-control
                              type="text"
                              class="form-control"
                              formControlName="{{ item.key }}"
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div
                  *ngIf="
                    infoJSON.Invoice['cac:LegalMonetaryTotal'] &&
                    infoJSON.Invoice['cac:LegalMonetaryTotal'][
                      'cbc:PayableAmount'
                    ]
                  "
                >
                  <div formGroupName="cbc:PayableAmount">
                    <div *ngIf="infoJSON.Invoice['cac:LegalMonetaryTotal']">
                      <div class="flex-content">
                        <div
                          *ngFor="
                            let item of infoJSON.Invoice[
                              'cac:LegalMonetaryTotal'
                            ]['cbc:PayableAmount'] | keyvalue
                          "
                          class="ms-1"
                        >
                          <div>
                            <label
                              fd-form-label
                              for="input-message"
                              id="label-input"
                              >{{ changeName(item.key) }}</label
                            >
                            <input
                              fd-form-control
                              type="text"
                              class="form-control"
                              formControlName="{{ item.key }}"
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </fd-layout-grid>
            </form>

            <!-- Detalle general  -->
            <form
              [formGroup]="$any(detailForm)"
              *ngIf="step.label === 'Detalle general'"
            >
              <fd-layout-grid style="margin-left: 4px">
                <div
                  class="ms-1"
                  *ngFor="
                    let detail of this.infoJSON.Invoice['cac:InvoiceLine'];
                    let i = index
                  "
                  fdLayoutGridRow
                  [formGroupName]="i"
                >
                  <div *ngFor="let mean of detail | keyvalue">
                    <div *ngIf="mean.key === 'cbc:ID'">
                      <div formGroupName="cbc:ID">
                        <div *ngIf="infoJSON.Invoice['cac:InvoiceLine']">
                          <div
                            *ngFor="
                              let itemID of infoJSON.Invoice['cac:InvoiceLine'][
                                i
                              ]['cbc:ID'] | keyvalue
                            "
                            class="ms-1"
                          >
                            <label
                              fd-form-label
                              id="label-input"
                              for="input-message"
                              >{{ changeName(itemID.key) }}</label
                            >
                            <input
                              fd-form-control
                              type="text"
                              class="form-control"
                              formControlName="{{ itemID.key }}"
                            />
                          </div>
                        </div>
                      </div>
                    </div>

                    <div *ngIf="mean.key === 'cbc:InvoicedQuantity'">
                      <div formGroupName="cbc:InvoicedQuantity">
                        <div *ngIf="infoJSON.Invoice['cac:InvoiceLine']">
                          <div class="flex-content">
                            <div
                              *ngFor="
                                let item of infoJSON.Invoice['cac:InvoiceLine'][
                                  i
                                ]['cbc:InvoicedQuantity'] | keyvalue
                              "
                              class="ms-1"
                            >
                              <label
                                fd-form-label
                                id="label-input"
                                for="input-message"
                                >{{ changeName(item.key) }}</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="{{ item.key }}"
                              />
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div *ngIf="mean.key === 'cbc:LineExtensionAmount'">
                      <div formGroupName="cbc:LineExtensionAmount">
                        <div *ngIf="infoJSON.Invoice['cac:InvoiceLine']">
                          <div class="flex-content">
                            <div
                              *ngFor="
                                let item of infoJSON.Invoice['cac:InvoiceLine'][
                                  i
                                ]['cbc:LineExtensionAmount'] | keyvalue
                              "
                              class="ms-1"
                            >
                              <label
                                fd-form-label
                                id="label-input"
                                for="input-message"
                                >{{ changeName(item.key) }}</label
                              >
                              <input
                                fd-form-control
                                type="text"
                                class="form-control"
                                formControlName="{{ item.key }}"
                              />
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </fd-layout-grid>
            </form>
          </fd-wizard-content>
        </li>
      </ul>
    </fd-wizard-navigation>
    <div fd-bar barDesign="footer">
      <div fd-bar-left>
        <div class="row row-cols-1 row-cols-md-2 spacing">
          <button
            fd-button
            fdCompact
            fdType="emphasized"
            type="button"
            (click)="goToStep(currentStep - 1)"
            *ngIf="currentStep !== 0"
          >
            Regresar
          </button>
          <button
            fd-button
            fdCompact
            fdType="emphasized"
            type="submit"
            (click)="goToStep(currentStep + 1)"
            *ngIf="currentStep + 1 < steps.length"
          >
            Próximo paso
          </button>
        </div>
      </div>

      <div fd-bar-right style="margin-top: 20px">
        <fd-bar-element>
          <button fd-button label="Cancel" fdCompact></button>
        </fd-bar-element>
        <a
          style="text-decoration: none"
          [href]="fileUrl"
          download="file.txt"
          (click)="downloadNewJson()"
          ><button
            fd-button
            fdCompact
            fdType="emphasized"
            type="button"
            label="Descargar cambios"
          ></button
        ></a>
      </div>
    </div>
  </fd-wizard>
</div>